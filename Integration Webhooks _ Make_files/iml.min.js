!function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){return o(e[i][1][r]||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}({1:[function(require,module,exports){(function(global){"use strict";
/*
Integromat IML

@license Copyright (c) Integromat - All rights reserved.
@version 3.1.1
*/var _iml=require("./lib/iml.js");window.imt&&imt.plugins.push({name:"IML",version:"3.1.1"}),global.IML=_iml.IML,global.SIML=_iml.SIML,global.IMLTree=_iml.IMLTree,global.IMLError=_iml.IMLError,_iml.IML.defaults={get timezone(){return window.imt?imt.user.timezone:"UTC"}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/iml.js":9}],2:[function(require,module,exports){"use strict";var BASE64_CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BASE64_REVERSE_LOOKUP=null;module.exports={encodeBase64:function(arrayBufferOrString){var base64="";"string"==typeof arrayBufferOrString&&(arrayBufferOrString=(new TextEncoder).encode(arrayBufferOrString));for(var chunk,bytes=arrayBufferOrString instanceof Uint8Array?arrayBufferOrString:new Uint8Array(arrayBufferOrString.buffer),byteLength=bytes.byteLength,byteRemainder=byteLength%3,mainLength=byteLength-byteRemainder,i=0;i<mainLength;i+=3)chunk=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2],base64+=BASE64_CHARACTERS[(16515072&chunk)>>18]+BASE64_CHARACTERS[(258048&chunk)>>12]+BASE64_CHARACTERS[(4032&chunk)>>6]+BASE64_CHARACTERS[63&chunk];return 1===byteRemainder?(chunk=bytes[mainLength],base64+=BASE64_CHARACTERS[(252&chunk)>>2]+BASE64_CHARACTERS[(3&chunk)<<4]+"=="):2===byteRemainder&&(chunk=bytes[mainLength]<<8|bytes[mainLength+1],base64+=BASE64_CHARACTERS[(64512&chunk)>>10]+BASE64_CHARACTERS[(1008&chunk)>>4]+BASE64_CHARACTERS[(15&chunk)<<2]+"="),base64},decodeBase64:function(base64String){if(!BASE64_REVERSE_LOOKUP){BASE64_REVERSE_LOOKUP=new Uint8Array(256);for(var i=0;i<BASE64_CHARACTERS.length;i++)BASE64_REVERSE_LOOKUP[BASE64_CHARACTERS.charCodeAt(i)]=i}var bufferLength=.75*base64String.length;"="===base64String[base64String.length-1]&&(bufferLength--,"="===base64String[base64String.length-2]&&bufferLength--);for(var a,b,c,d,buffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(buffer),p=0,_i=0,len=base64String.length;_i<len;_i+=4)a=BASE64_REVERSE_LOOKUP[base64String.charCodeAt(_i)],b=BASE64_REVERSE_LOOKUP[base64String.charCodeAt(_i+1)],c=BASE64_REVERSE_LOOKUP[base64String.charCodeAt(_i+2)],d=BASE64_REVERSE_LOOKUP[base64String.charCodeAt(_i+3)],bytes[p++]=a<<2|b>>4,bytes[p++]=(15&b)<<4|c>>2,bytes[p++]=(3&c)<<6|63&d;return buffer}}},{}],3:[function(require,module,exports){(function(global,Buffer){"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(void 0,key=function(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,"string");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(input)}(descriptor.key),"symbol"===_typeof(key)?key:String(key)),descriptor)}var key}var BuiltInBuffer=void 0===Buffer?function(){function FakeBuffer(value){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,FakeBuffer),this._value=value,this.codepage=void 0}var Constructor,protoProps,staticProps;return Constructor=FakeBuffer,staticProps=[{key:"from",value:function(value){return new FakeBuffer(value)}},{key:"isBuffer",value:function(value){return value instanceof FakeBuffer}}],(protoProps=[{key:"toString",value:function(codepage){return this._value}}])&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),FakeBuffer}():global.Buffer;function isBufferLike(maybeBuffer){if(!maybeBuffer)return!1;var buffer=maybeBuffer&&maybeBuffer.buffer||maybeBuffer;return BuiltInBuffer.isBuffer(buffer)||buffer instanceof ArrayBuffer||"undefined"!=typeof SharedArrayBuffer&&buffer instanceof SharedArrayBuffer}function toBuffer(input){if(BuiltInBuffer.isBuffer(input))return input;var buffer=BuiltInBuffer.from(input);return"object"===_typeof(input)&&input.codepage&&(buffer.codepage=input.codepage),buffer}module.exports={Buffer:BuiltInBuffer,isBufferLike:isBufferLike,toBuffer:toBuffer,toBufferIfBytes:function(input){return isBufferLike(input)?toBuffer(input):input}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},require("buffer").Buffer)},{buffer:17}],4:[function(require,module,exports){"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var IMTDate=require("@integromat/dateparser").IMTDate,typeCheck=require("./utils.js").typeCheck,semver=require("semver");module.exports=function compare(a,b,operator){var category=operator.split(":");switch(category[0]){case"exist":return null!=a&&""!==a;case"notexist":return!(null!=a&&""!==a);case"text":switch(a=String(null!=a?a:""),b=String(null!=b?b:""),"ci"===category[2]&&(a=a.toLowerCase(),b=b.toLowerCase()),category[1]){case"equal":return a===b;case"notequal":return a!==b;case"contain":return-1!==a.indexOf(b);case"notcontain":return-1===a.indexOf(b);case"startwith":return 0===a.indexOf(b);case"notstartwith":return 0!==a.indexOf(b);case"endwith":return-1!==a.lastIndexOf(b)&&a.lastIndexOf(b)===a.length-b.length;case"notendwith":return-1===a.lastIndexOf(b)||a.lastIndexOf(b)!==a.length-b.length;case"pattern":try{return new RegExp(b).test(a)}catch(ex){return!1}case"notpattern":try{return!new RegExp(b).test(a)}catch(ex){return!0}default:return!1}case"number":case"time":if("time"===category[0]&&(a=IMTDate.parseTime(a,this.timezone),b=IMTDate.parseTime(b,this.timezone)),null!=a&&""!==a||(a=NaN),null!=b&&""!==b||(b=NaN),a=Number(a),b=Number(b),isNaN(a||isNaN(b)))return"notequal"===category[1];switch(category[1]){case"equal":return a===b;case"notequal":return a!==b;case"greater":return a>b;case"less":return a<b;case"greaterorequal":return a>=b;case"lessorequal":return a<=b;default:return!1}case"date":if(a=IMTDate.parse(a,this.timezone),b=IMTDate.parse(b,this.timezone),null==a&&null==b)return"notequal"===category[1];if(!(a instanceof Date&&b instanceof Date))return"notequal"===category[1];if(isNaN(a.getTime()||isNaN(b.getTime())))return"notequal"===category[1];switch(category[1]){case"equal":return a.getTime()===b.getTime();case"notequal":return a.getTime()!==b.getTime();case"greater":return a.getTime()>b.getTime();case"less":return a.getTime()<b.getTime();case"greaterorequal":return a.getTime()>=b.getTime();case"lessorequal":return a.getTime()<=b.getTime();default:return!1}case"semver":try{a=semver.parse(a),b=semver.parse(b)}catch(_){return!1}if(null==a||null==b)return!1;switch(category[1]){case"equal":return semver.eq(a,b);case"notequal":return semver.neq(a,b);case"greater":return semver.gt(a,b);case"less":return semver.lt(a,b);case"greaterorequal":return semver.gte(a,b);case"lessorequal":return semver.lte(a,b);default:return!1}case"array":if(["contain","notcontain"].includes(category[1])){if(null==a||null==b)return!1;if("array"!==typeCheck(a))return!1;var type=typeCheck(b);"string"===type&&"ci"===category[2]&&(b=b.toLowerCase());var cont=a.some((function(item){switch(type){case"string":case"number":switch(typeCheck(item)){case"string":case"number":return"ci"===category[2]&&(item=item.toLowerCase()),String(item)===String(b);default:return!1}case"date":return"date"===typeCheck(b)&&+item==+b;default:return item===b}}));return"notcontain"===category[1]?!cont:cont}return Array.isArray(a)&&(a=a.length),Array.isArray(b)&&(b=b.length),compare.call(this,a,b,"number:".concat(category[1]));case"boolean":switch("string"===typeCheck(a)?a=!(""===(a=String(a))||"false"===a):"boolean"!=typeof a&&(a=null!=a),"string"===typeCheck(b)?b=!(""===(b=String(b))||"false"===b):"boolean"!=typeof b&&(b=null!=b),category[1]){case"equal":return a===b;case"notequal":return a!==b;default:return!1}case"object":if(null==a&&null==b)return!0;if(null==a||null==b)return!1;if("object"!==_typeof(a))return!1;if(_typeof(a)!==_typeof(b))return!1;break;default:return!1}}},{"./utils.js":13,"@integromat/dateparser":15,semver:47}],5:[function(require,module,exports){"use strict";var toBufferIfBytes=require("./bytes").toBufferIfBytes,crypto="undefined"!=typeof window?null:require("./../shims/crypto.js");module.exports={md5:function(data){return crypto?(data=toBufferIfBytes(data),crypto.createHash("md5").update(data).digest("hex")):""},sha1:function(data){var key=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,outputEncoding=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return crypto?(data=toBufferIfBytes(data),key?crypto.createHmac("sha1",key).update(data).digest(outputEncoding):crypto.createHash("sha1").update(data).digest(outputEncoding)):""},sha256:function(data){var key=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,outputEncoding=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return crypto?(data=toBufferIfBytes(data),key?crypto.createHmac("sha256",key).update(data).digest(outputEncoding):crypto.createHash("sha256").update(data).digest(outputEncoding)):""},sha512:function(data){var key=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,outputEncoding=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex";return crypto?(data=toBufferIfBytes(data),key?crypto.createHmac("sha512",key).update(data).digest(outputEncoding):crypto.createHash("sha512").update(data).digest(outputEncoding)):""}}},{"./../shims/crypto.js":66,"./bytes":3}],6:[function(require,module,exports){"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function _possibleConstructorReturn(self,call){if(call&&("object"===_typeof(call)||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(self)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(Class){if(null===Class||!function(fn){try{return-1!==Function.toString.call(fn).indexOf("[native code]")}catch(e){return"function"==typeof fn}}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)})(Class)}function _construct(Parent,args,Class){return(_construct=_isNativeReflectConstruct()?Reflect.construct.bind():function(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,p){return o.__proto__=p,o})(o,p)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}var IMLError=function(_Error){!function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(IMLError,_Error);var Derived,hasNativeReflectConstruct,_super=(Derived=IMLError,hasNativeReflectConstruct=_isNativeReflectConstruct(),function(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)});function IMLError(message){var _this;return function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IMLError),(_this=_super.call(this)).name="IMLError",_this.message=message,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(_assertThisInitialized(_this),_this.constructor),_this}return IMLError}(_wrapNativeSuper(Error));module.exports={IMLError:IMLError}},{}],7:[function(require,module,exports){"use strict";module.exports={exist:{symbol:"?"},notexist:{symbol:"!?"},"text:equal":{symbol:"="},"text:equal:ci":{symbol:"="},"text:notequal":{symbol:"!="},"text:notequal:ci":{symbol:"!="},"text:contain":{symbol:"~"},"text:contain:ci":{symbol:"~"},"text:notcontain":{symbol:"!~"},"text:notcontain:ci":{symbol:"!~"},"text:startwith":{symbol:"^."},"text:startwith:ci":{symbol:"^."},"text:notstartwith":{symbol:"!^."},"text:notstartwith:ci":{symbol:"!^."},"text:endwith":{symbol:".$"},"text:endwith:ci":{symbol:".$"},"text:notendwith":{symbol:"!.$"},"text:notendwith:ci":{symbol:"!.$"},"text:pattern":{symbol:"(.*)"},"text:pattern:ci":{symbol:"(.*)"},"text:notpattern":{symbol:"!(.*)"},"text:notpattern:ci":{symbol:"!(.*)"},"number:equal":{symbol:"="},"number:notequal":{symbol:"!="},"number:greater":{symbol:">"},"number:less":{symbol:"<"},"number:greaterorequal":{symbol:">="},"number:lessorequal":{symbol:"<="},"date:equal":{symbol:"="},"date:notequal":{symbol:"!="},"date:greater":{symbol:">"},"date:less":{symbol:"<"},"date:greaterorequal":{symbol:">="},"date:lessorequal":{symbol:"<="},"time:equal":{symbol:"="},"time:notequal":{symbol:"!="},"time:greater":{symbol:">"},"time:less":{symbol:"<"},"time:greaterorequal":{symbol:">="},"time:lessorequal":{symbol:"<="},"semver:equal":{symbol:"="},"semver:notequal":{symbol:"!="},"semver:greater":{symbol:">"},"semver:less":{symbol:"<"},"semver:greaterorequal":{symbol:">="},"semver:lessorequal":{symbol:"<="},"array:contain":{symbol:"@>"},"array:contain:ci":{symbol:"@>"},"array:notcontain":{symbol:"!@>"},"array:notcontain:ci":{symbol:"!@>"},"array:equal":{symbol:"=="},"array:notequal":{symbol:"!="},"array:greater":{symbol:">"},"array:less":{symbol:"<"},"array:greaterorequal":{symbol:">="},"array:lessorequal":{symbol:"<="},"boolean:equal":{symbol:"="},"boolean:notequal":{symbol:"!="}}},{}],8:[function(require,module,exports){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var moment=require("./../shims/moment-timezone.js"),crypto=require("./crypto"),IMTDate=require("@integromat/dateparser").IMTDate,_require2=require("./utils.js"),mapVariable=_require2.mapVariable,isNumberOrNumberAsString=_require2.isNumberOrNumberAsString,typeCheck=_require2.typeCheck,deepEqual=_require2.deepEqual,valueError=_require2.valueError,isNumber=_require2.isNumber,isDecimalNumber=_require2.isDecimalNumber,destructDecimalNumber=_require2.destructDecimalNumber,validateAndTransformNumberEntries=_require2.validateAndTransformNumberEntries,_require3=require("./bytes"),Buffer=_require3.Buffer,toBuffer=_require3.toBuffer,compare=require("./compare.js"),encodeBase64=require("./base64").encodeBase64,_distinct={type:"array",group:"array",value:function(array){var _this=this;if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));var key=arguments[1],values=[];return array.filter((function(value){if(key&&(value=mapVariable.call(_this,value,key)),null==value&&-1!==values.indexOf(null))return!1;if(["string","number","boolean"].includes(_typeof(value))){if(value=String(value),-1!==values.indexOf(value))return!1}else if("date"===typeCheck(value)){if(value=value.getTime(),-1!==values.indexOf(value))return!1}else if(null!=value&&"object"===_typeof(value)){for(var found=!1,_i=0,_values=values;_i<_values.length;_i++){var val=_values[_i];if(null!=val&&"object"===_typeof(val)&&deepEqual(value,val)){found=!0;break}}if(found)return!1}else if(null!=value)return!1;return values.push(null!=value?value:null),!0}))},outputs:function(array){return array}},_evaluateDeviation=function(numbers,deviationType){var mean=numbers.reduce((function(mean,number){return mean+number}),0)/numbers.length,squareDistances=numbers.map((function(number){return Math.pow(number-mean,2)})),dividerOfSampleStandardDeviations="standard"===deviationType?numbers.length-1:numbers.length,divideSum=squareDistances.reduce((function(sum,squareDistance){return sum+squareDistance}),0)/dividerOfSampleStandardDeviations;return Math.sqrt(divideSum)},FUNCTIONS=module.exports={"":{type:"*",group:"general",value:function(_value){return _value},outputs:function(value){return value}},get:{type:"*",group:"general",value:function(_value2,property){return mapVariable.call(this,_value2,property)}},average:{type:"number",group:"math",value:function(one){var _step,numArr=("array"===typeCheck(one)?one:Array.prototype.slice.call(arguments)).filter((function(num){return isNumber(num)})),sum=0,_iterator=_createForOfIteratorHelper(numArr);try{for(_iterator.s();!(_step=_iterator.n()).done;){var num=_step.value;sum+=num}}catch(err){_iterator.e(err)}finally{_iterator.f()}return sum/numArr.length}},ceil:{type:"integer",group:"math",value:function(num){if(null==num)return this.passthrough?num:null;if(""===num)return null;if("number"!==typeCheck(num))throw new Error(valueError(num,"'{{value}}' is not a valid number.","Invalid number."));return Math.ceil(num)}},floor:{type:"integer",group:"math",value:function(num){if(null==num)return this.passthrough?num:null;if(""===num)return null;if("number"!==typeCheck(num))throw new Error(valueError(num,"'{{value}}' is not a valid number.","Invalid number."));return Math.floor(num)}},if:{type:"*",group:"general",value:function(statement,exp1,exp2){return statement?exp1:exp2},outputs:function(statement,exp1,exp2){return exp1}},ifempty:{type:"*",group:"general",value:function(exp1,exp2){return"string"===typeCheck(exp1)?0===exp1.length?exp2:exp1:null!=exp1?exp1:exp2},outputs:function(exp1){return exp1}},switch:{type:"*",group:"general",value:function(_value3,k,v){var def,args=Array.prototype.slice.call(arguments);args.length%2==0&&(def=args.pop());var type=typeCheck(_value3);if("string"!==type&&"number"!==type&&"boolean"!==type)return null!=def||this.passthrough?def:null;_value3=String(_value3);for(var i=1;i<args.length;){var _type=typeCheck(args[i]);if(("string"===_type||"number"===_type||"boolean"===_type)&&_value3===String(args[i]))return args[i+1];i+=2}return null!=def||this.passthrough?def:null}},join:{type:"text",group:"array",value:function(array,separator){var join=function join(array,separator,brackets){null==separator&&(separator=","),null==brackets&&(brackets=!1);var out="";brackets&&(out+="[");for(var i=0;i<array.length;i++){var elem=array[i];switch(typeCheck(elem)){case"null":case"undefined":out+="";break;case"object":out+="{object}";break;case"buffer":out+="{buffer}";break;case"date":out+=elem.toISOString();break;case"array":out+=join(elem,separator,brackets);break;default:out+=elem}i<array.length-1&&(out+=separator)}return brackets&&(out+="]"),out};return"array"!==typeCheck(array)?"":null!=separator&&["string","number"].includes(typeCheck(separator))?join(array,separator,null!=arguments[2]&&!0===arguments[2]):join(array,",",null!=arguments[2]&&!0===arguments[2])}},length:{type:"uinteger",group:["string","array"],value:function(text){if(null==text)return 0;switch(typeCheck(text)){case"array":case"buffer":return text.length;default:return String(text).length}}},lower:{type:"text",group:"string",value:function(text){return null==text?this.passthrough?text:null:String(text).toLowerCase()}},capitalize:{type:"text",group:"string",value:function(text){return null==text?this.passthrough?text:null:(text=String(text)).charAt(0).toUpperCase()+text.slice(1)}},startcase:{type:"text",group:"string",value:function(text){return null==text?this.passthrough?text:null:(text=String(text)).split(" ").map((function(word){return FUNCTIONS.capitalize.value(word.toLowerCase())})).join(" ")}},ascii:{type:"text",group:"string",value:function(text){if(null==text)return this.passthrough?text:null;if(text=String(text),arguments[1])try{text=text.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}catch(ex){}return text.replace(/[^\x00-\x7F]/g,"")}},trunc:{type:"number",group:"math",value:function(entryNumberToTrunc){var entryNumDigits=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!isNumberOrNumberAsString(entryNumberToTrunc))throw new Error(valueError(entryNumberToTrunc,"'{{value}}' is not a valid number.","Invalid number."));if(!isNumberOrNumberAsString(entryNumDigits))throw new Error(valueError(entryNumDigits,"'{{numDigits}}' is not a valid number.","Invalid number."));var numberToTrunc=Number(entryNumberToTrunc),numDigits=Number(entryNumDigits);if(isDecimalNumber(numberToTrunc)&&numDigits>=0){var _destructDecimalNumbe=destructDecimalNumber(numberToTrunc),integerNumber=_destructDecimalNumbe.integerNumber,decimalNumber=_destructDecimalNumbe.decimalNumber;if(decimalNumber.length<numDigits)return Number(numberToTrunc.toFixed(numDigits));var shorterDecimalNumber=decimalNumber.substring(0,numDigits);return Number("".concat(integerNumber,".").concat(shorterDecimalNumber))}if(numDigits<0){var decimalHelper=Math.pow(10,numDigits);return Math.trunc(numberToTrunc*decimalHelper)/decimalHelper}return Number(numberToTrunc.toFixed(numDigits))}},median:{type:"number",group:"math",value:function(){for(var _len=arguments.length,entryNumbers=new Array(_len),_key=0;_key<_len;_key++)entryNumbers[_key]=arguments[_key];var numbers=validateAndTransformNumberEntries(entryNumbers);if(0===numbers.length)return null;var sortedNumbers=numbers.sort((function(a,b){return a-b})),middleIndex=Math.floor(sortedNumbers.length/2);return sortedNumbers.length%2==0?(sortedNumbers[middleIndex-1]+sortedNumbers[middleIndex])/2:sortedNumbers[middleIndex]}},max:{type:"number",group:"math",value:function(one){var numArr=("array"===typeCheck(one)?one:Array.prototype.slice.call(arguments)).filter((function(num){return isNumber(num)}));return Math.max.apply(null,numArr)}},min:{type:"number",group:"math",value:function(one){var numArr=("array"===typeCheck(one)?one:Array.prototype.slice.call(arguments)).filter((function(num){return isNumber(num)}));return Math.min.apply(null,numArr)}},abs:{type:"number",group:"math",value:function(_value4){if(!isNumberOrNumberAsString(_value4))throw new Error(valueError(_value4,"'{{value}}' is not number.","Invalid number."));return Math.abs(Number(_value4))}},replace:{type:"text",group:"string",value:function(text,what,replace){if(null==text)return this.passthrough?text:null;if(null==what)return text;if(null==replace)return text;if("buffer"!==typeCheck(text)||text.codepage&&!["ascii","utf8"].includes(text.codepage)||(text=toBuffer(text).toString(text.codepage)),!["string","number"].includes(typeCheck(text)))throw new Error(valueError(text,"'{{value}}' is not string or number.","Invalid string or number."));if(!["string","number"].includes(typeCheck(what)))throw new Error(valueError(what,"'{{value}}' is not string or number.","Invalid string or number."));if(!["string","number"].includes(typeCheck(replace)))throw new Error(valueError(replace,"'{{value}}' is not string or number.","Invalid string or number."));var regExp;if(/^\/.*\/[gim]?$/.test(what)){var match=/^\/(.*)\/([gim]?)$/.exec(what);regExp=new RegExp(match[1],match[2])}else regExp=new RegExp(String(what).replace(/[^\w\s]/gi,"\\$&"),"g");return String(text).replace(regExp,replace)}},replaceEmojiCharacters:{type:"text",group:"string",value:function(text,replace){if(null==text)return this.passthrough?text:null;if(null==replace||void 0===replace)throw new Error(valueError(replace,"The replacement value is required to be added. Invalid value: '{{value}}'","Missing value for replacement."));if("buffer"!==typeCheck(text)||text.codepage&&!["ascii","utf8"].includes(text.codepage)||(text=toBuffer(text).toString(text.codepage)),!["string","number"].includes(typeCheck(text)))throw new Error(valueError(text,"'{{value}}' is not string or number.","Invalid string or number."));if(!["string","number"].includes(typeCheck(replace)))throw new Error(valueError(replace,"'{{value}}' is not string or number.","Invalid string or number."));return String(text).replace(/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/gm,replace)}},round:{type:"integer",group:"math",value:function(num){if(null==num)return this.passthrough?num:null;if(""===num)return null;if(!["string","number"].includes(typeCheck(num)))throw new Error(valueError(num,"'{{value}}' is not a valid number.","Invalid number."));return Math.round(num)}},trim:{type:"text",group:"string",value:function(text){return null==text?this.passthrough?text:null:String(text).trim()}},upper:{type:"text",group:"string",value:function(text){return null==text?this.passthrough?text:null:String(text).toUpperCase()}},substring:{type:"text",group:"string",value:function(text,start,end){return null==text?this.passthrough?text:null:String(text).substring(start,end)}},indexOf:{type:"integer",group:"string",value:function(text,_value5){return null==text?this.passthrough?text:null:String(text).indexOf(_value5,arguments[2])}},sum:{type:"number",group:"math",value:function(one){var _step2,sum=0,_iterator2=_createForOfIteratorHelper("array"===typeCheck(one)?one:Array.prototype.slice.call(arguments));try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var num=_step2.value;isNumber(num)&&(sum+=parseFloat(num))}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return sum}},toBinary:{type:"text",group:"string",value:function(entry){if(null==entry)return this.passthrough?entry:null;if("buffer"===typeCheck(entry))return entry;var encoding="utf8";if(2===arguments.length&&(encoding=arguments[1]),"string"!==typeCheck(encoding))throw new Error(valueError(encoding,"'{{value}}' is not a valid encoding.","Invalid encoding."));if("utf-8"===(encoding=encoding.toLowerCase())&&(encoding="utf8"),!["ascii","hex","base64","utf8","binary"].includes(encoding))throw new Error(valueError(encoding,"'{{value}}' is not a valid encoding.","Invalid encoding."));var buffer="string"===typeCheck(entry)?Buffer.from(entry,encoding):Buffer.from(FUNCTIONS.toString.value(entry));return buffer}},toString:{type:"text",group:"string",value:function(entry){if(null==entry)return"";var encoding="utf8";if(2===arguments.length&&(encoding=arguments[1]),"string"!==typeCheck(encoding))throw new Error(valueError(encoding,"'{{value}}' is not a valid encoding.","Invalid encoding."));if("utf-8"===(encoding=encoding.toLowerCase())&&(encoding="utf8"),!["ascii","hex","base64","utf8","binary"].includes(encoding))throw new Error(valueError(encoding,"'{{value}}' is not a valid encoding.","Invalid encoding."));switch(typeCheck(entry)){case"number":return entry.toString();case"array":return FUNCTIONS.join.value(entry,",",!0);case"date":return entry.toISOString();case"buffer":return toBuffer(entry).toString(encoding);case"object":return"{object}";case"null":case"undefined":case"unknown":return"";default:return String(entry)}}},encodeURL:{type:"text",group:"string",value:function(text){return null==text?this.passthrough?text:null:encodeURIComponent(text)}},decodeURL:{type:"text",group:"string",value:function(text){return null==text?this.passthrough?text:null:decodeURIComponent(text)}},escapeHTML:{type:"text",group:"string",value:function(text){if(null==text)return this.passthrough?text:null;var map={"&":"&amp;","<":"&lt;",">":"&gt;"};return String(text).replace(/[&<>]/g,(function(tag){return map[tag]||tag}))}},escapeMarkdown:{type:"text",group:"string",value:function(text){if(null==text)return this.passthrough?text:null;var map={"#":"&#35;","*":"&#42;",_:"&#95;","=":"&#61;","-":"&#45;","~":"&#126;","+":"&#43;","[":"&#91;","]":"&#93;","(":"&#40;",")":"&#41;",":":"&#58;","!":"&#33;","/":"&#47;","\\":"&#92;","`":"&#96;","|":"&#124;",">":"&gt;","<":"&lt;","&":"&amp;"};return String(text).replace(/[\#\*\_\=\-\~\+\[\]\(\)\:\!\/\\\`\|<>&]/g,(function(tag){return map[tag]||tag}))}},stripHTML:{type:"text",group:"string",value:function(text){return null==text?this.passthrough?text:null:String(text).replace(/<style[^>]*>[\s\S]*?<\/style>/g,"").replace(/<script[^>]*>[\s\S]*?<\/script>/g,"").replace(/<br\s*\/?>/g,"\n").replace(/<\/?[^>]+>/g,"")}},addSeconds:{type:"date",group:"date",value:function(date,numberOfSeconds){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var seconds=Number(numberOfSeconds);if(!isNumber(seconds))throw new Error(valueError(numberOfSeconds,"'{{value}}' is not a valid number of seconds.","Invalid number of seconds."));return moment(dateObj).tz(this.timezone).add(seconds,"s").toDate()}},addMinutes:{type:"date",group:"date",value:function(date,numberOfMinutes){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var minutes=Number(numberOfMinutes);if(!isNumber(minutes))throw new Error(valueError(numberOfMinutes,"'{{value}}' is not a valid number of minutes.","Invalid number of minutes."));return moment(dateObj).tz(this.timezone).add(minutes,"m").toDate()}},addHours:{type:"date",group:"date",value:function(date,numberOfHours){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var hours=Number(numberOfHours);if(!isNumber(hours))throw new Error(valueError(numberOfHours,"'{{value}}' is not a valid number of hours.","Invalid number of hours."));return moment(dateObj).tz(this.timezone).add(hours,"H").toDate()}},addDays:{type:"date",group:"date",value:function(date,numberOfDays){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var days=Number(numberOfDays);if(!isNumber(days))throw new Error(valueError(numberOfDays,"'{{value}}' is not a valid number of days.","Invalid number of days."));return moment(dateObj).tz(this.timezone).add(days,"d").toDate()}},addMonths:{type:"date",group:"date",value:function(date,numberOfMonths){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var months=Number(numberOfMonths);if(!isNumber(months))throw new Error(valueError(numberOfMonths,"'{{value}}' is not a valid number of months.","Invalid number of months."));return moment(dateObj).tz(this.timezone).add(months,"M").toDate()}},addYears:{type:"date",group:"date",value:function(date,numberOfYears){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var years=Number(numberOfYears);if(!isNumber(years))throw new Error(valueError(numberOfYears,"'{{value}}' is not a valid number of years.","Invalid number of years."));return moment(dateObj).tz(this.timezone).add(years,"Y").toDate()}},setSecond:{type:"date",group:"date",value:function(date,numberOfSeconds){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var seconds=Number(numberOfSeconds);if(!isNumber(seconds))throw new Error(valueError(numberOfSeconds,"'{{value}}' is not a valid number of seconds.","Invalid number of seconds."));return moment(dateObj).tz(this.timezone).second(seconds).toDate()}},setMinute:{type:"date",group:"date",value:function(date,numberOfMinutes){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var minutes=Number(numberOfMinutes);if(!isNumber(minutes))throw new Error(valueError(numberOfMinutes,"'{{value}}' is not a valid number of minutes.","Invalid number of minutes."));return moment(dateObj).tz(this.timezone).minute(minutes).toDate()}},setHour:{type:"date",group:"date",value:function(date,numberOfHours){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var hours=Number(numberOfHours);if(!isNumber(hours))throw new Error(valueError(numberOfHours,"'{{value}}' is not a valid number of hours.","Invalid number of hours."));return moment(dateObj).tz(this.timezone).hours(hours).toDate()}},setDay:{type:"date",group:"date",value:function(date,numberOfDays){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));if(/^(monday|mon|tuesday|tue|wednesday|wed|thursday|thu|friday|fri|saturday|sat|sunday|sun)$/i.test(numberOfDays))return moment(dateObj).tz(this.timezone).day(numberOfDays).toDate();var days=Number(numberOfDays);if(!isNumber(days))throw new Error(valueError(numberOfDays,"'{{value}}' is not a valid number of days.","Invalid number of days."));return moment(dateObj).tz(this.timezone).day(days-1).toDate()}},setDate:{type:"date",group:"date",value:function(date,numberOfDays){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var days=Number(numberOfDays);if(!isNumber(days))throw new Error(valueError(numberOfDays,"'{{value}}' is not a valid number of days.","Invalid number of days."));return moment(dateObj).tz(this.timezone).date(days).toDate()}},setMonth:{type:"date",group:"date",value:function(date,numberOfMonths){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));if(/^(january|jan|february|feb|march|mar|april|apr|may|june|jun|july|jul|august|aug|september|sep|october|oct|november|nov|december|dec)$/i.test(numberOfMonths))return moment(dateObj).tz(this.timezone).month(numberOfMonths).toDate();var months=Number(numberOfMonths);if(!isNumber(months))throw new Error(valueError(numberOfMonths,"'{{value}}' is not a valid number of months.","Invalid number of months."));return moment(dateObj).tz(this.timezone).month(months-1).toDate()}},setYear:{type:"date",group:"date",value:function(date,numberOfYears){if(null==date)return this.passthrough?date:null;var dateObj;switch(typeCheck(date)){case"date":dateObj=new Date(+date);break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));var years=Number(numberOfYears);if(!isNumber(years))throw new Error(valueError(numberOfYears,"'{{value}}' is not a valid number of years.","Invalid number of years."));return moment(dateObj).tz(this.timezone).year(years).toDate()}},formatDate:{type:"text",group:"date",value:function(date,format){if(null==date)return this.passthrough?date:null;var dateObj;switch(format||(format="YYYY-MM-DDTHH:mm:ss.SSSZ"),typeCheck(date)){case"date":dateObj=date;break;case"number":dateObj=new Date(Number(date));break;case"string":dateObj=IMTDate.parse(date,this.timezone);break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(!dateObj||isNaN(dateObj.getTime()))throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."));if("string"!==typeCheck(format))throw new Error(valueError(format,"'{{value}}' is not a valid date format.","Invalid date format."));if(date=moment(dateObj),arguments[2]){if("string"!==typeCheck(arguments[2]))throw new Error(valueError(arguments[2],"'{{value}}' is not a valid time zone.","Invalid time zone."));date=date.tz(arguments[2])}else date=this.timezone?date.tz(this.timezone):date.utc();return date.format(String(format).trim())}},parseDate:{type:"date",group:"date",value:function(date,format){if(null==date)return this.passthrough?date:null;var mdate;switch(typeCheck(date)){case"date":return date;case"number":if("string"!==typeCheck(format)){if(null!=format)throw new Error(valueError(format,"'{{value}}' is not a valid date format.","Invalid date format."));return new Date(1e3*date)}if("X"===format)return new Date(1e3*date);if("x"===format)return new Date(date);date=String(date);break;case"string":if("string"!==typeCheck(format)){if(null!=format)throw new Error(valueError(format,"'{{value}}' is not a valid date format.","Invalid date format."));return IMTDate.parse(date,this.timezone)}break;default:throw new Error(valueError(date,"'{{value}}' is not a valid date.","Invalid date."))}if(arguments[2])if("number"===typeCheck(arguments[2]))(mdate=moment.utc(date,format,"en")).add(-parseFloat(arguments[2]),"hours");else{if("string"!==typeCheck(arguments[2]))throw new Error(valueError(arguments[2],"'{{value}}' is not a valid time zone.","Invalid time zone."));mdate=moment.tz(date,format,"en",arguments[2])}else mdate=this.timezone?moment.tz(date,format,"en",this.timezone):moment.utc(date,format,"en");if(!mdate.isValid())throw new Error(valueError(date,"'{{value}}' is not a valid date or does not match the date format.","Invalid date."));return mdate.toDate()}},parseNumber:{type:"number",group:"math",value:function(stringNumber,separator){if(null==separator&&(separator="."),null==stringNumber)return this.passthrough?stringNumber:null;if("number"===typeCheck(stringNumber))return Number(stringNumber);if("string"!==typeCheck(stringNumber))throw new Error(valueError(stringNumber,"'{{value}}' is not a valid number.","Invalid number."));if("string"!==typeCheck(separator)||![",","."].includes(separator))throw new Error("Valid separators are ',' and '.'.");separator=separator.trim();var sign=stringNumber.substring(0,1).replace(/[^0-9\-]/g,""),number=stringNumber.substring(1).replace(/[^0-9,\.e]/g,"");if(stringNumber=sign+number,number=Number(","===separator?stringNumber.replace(/\./g,"").replace(/,/g,"."):stringNumber.replace(/,/g,"")),!isNumber(number))throw new Error(valueError(stringNumber,"'{{value}}' is not a valid number or using unsuitable separator.","Invalid number or separator."));return number}},stdevS:{type:"number",group:"math",value:function(){for(var _len2=arguments.length,entryNumbers=new Array(_len2),_key2=0;_key2<_len2;_key2++)entryNumbers[_key2]=arguments[_key2];var numbers=validateAndTransformNumberEntries(entryNumbers);return _evaluateDeviation(numbers,"standard")}},stdevP:{type:"number",group:"math",value:function(){for(var _len3=arguments.length,entryNumbers=new Array(_len3),_key3=0;_key3<_len3;_key3++)entryNumbers[_key3]=arguments[_key3];var numbers=validateAndTransformNumberEntries(entryNumbers);return _evaluateDeviation(numbers,"population")}},formatNumber:{type:"text",group:"math",value:function(number,decimalPoints,decimalSeparator,thousandsSeparator){if(null==decimalSeparator&&(decimalSeparator=","),null==thousandsSeparator&&(thousandsSeparator="."),null==number)return this.passthrough?number:null;if(!["number","string"].includes(typeCheck(number)))throw new Error(valueError(number,"'{{value}}' is not a valid number.","Invalid number."));if(number=Number(number),!isNumber(number))throw new Error(valueError(number,"'{{value}}' is not a valid number or using unsuitable separator.","Invalid number or separator."));var parts=(number=number.toFixed(decimalPoints)).split(".");return parts[0]=parts[0].replace(/\B(?=(\d{3})+(?!\d))/g,thousandsSeparator),parts.join(decimalSeparator)}},keys:{type:"array",group:"array",value:function(object){return["object","array"].includes(typeCheck(object))?Object.keys(object):[]},outputs:function(array){return{type:"array",spec:{type:"text"}}}},slice:{type:"array",group:"array",value:function(array,begin){if(null==array)return this.passthrough?array:null;var end=null!=arguments[2]?arguments[2]:void 0;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));if(!isNumber(begin))throw new Error(valueError(begin,"'{{value}}' is not a valid start number.","Invalid start number."));if(null!=end&&!isNumber(end))throw new Error(valueError(end,"'{{value}}' is not a valid end number.","Invalid end number."));return array.slice(begin,end)},outputs:function(array){return array}},merge:{type:"array",group:"array",value:function(array1,array2){var arrays=Array.prototype.slice.call(arguments);return(arrays=arrays.filter((function(arr){return Array.isArray(arr)}))).length?Array.prototype.concat.apply([],arrays||[]):null},outputs:function(array){return array}},contains:{type:"boolean",group:["array","string"],value:function(array,_value6){if(null==array||null==_value6)return!1;var ci=Boolean(arguments[2]);return["string","number"].includes(typeCheck(array))?(ci&&(array=String(array).toLowerCase(),_value6=String(_value6).toLowerCase()),array.indexOf(_value6)>=0):"array"===typeCheck(array)&&compare.call(this,array,_value6,"array:contain".concat(ci?":ci":""))}},split:{type:"array",group:"string",value:function(text,delimiter){null==delimiter&&(delimiter=",");var arr=null,keepEmpty=Boolean(arguments[2]);switch(typeCheck(text)){case"string":arr=text.split(delimiter);break;case"number":arr="string"==typeof text?text.split(delimiter):[String(text)];break;case"date":arr=text.toISOString();break;default:return null}return arr=arr.map((function(item){return item.replace(/^\s+|\s+$/g,"")})),keepEmpty||(arr=arr.filter((function(item){return""!==item}))),arr},outputs:function(){return{type:"text"}}},remove:{type:"array",group:"array",value:function(array){for(var _len4=arguments.length,values=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)values[_key4-1]=arguments[_key4];if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));return values=values.filter((function(value){var type=typeCheck(value);return"string"===type||"number"===type||"boolean"===type||"null"===type})),array.filter((function(item){var type=typeCheck(item);return"string"!==type&&"number"!==type&&"boolean"!==type&&"null"!==type&&"undefined"!==type||!values.some((function(value){return null===value?null==item:null!=item&&String(value)===String(item)}))}))},outputs:function(array){return array}},add:{type:"array",group:"array",value:function(array){if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));array=array.slice();for(var _len5=arguments.length,values=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++)values[_key5-1]=arguments[_key5];return array.push.apply(array,values||[]),array},outputs:function(array){return array}},map:{type:"array",group:"array",value:function(array,_value7){var key,keyNames,_this2=this;if(null==array)return this.passthrough?array:null;if(!Array.isArray(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));if(!["string","number"].includes(typeCheck(_value7)))throw new Error(valueError(_value7,"'{{value}}' is not a valid key.","Invalid key."));if(0===array.length)return[];if(null!=arguments[2]&&(key=arguments[2]),null!=arguments[3]&&(keyNames=arguments[3]),null!=key&&!["string","number"].includes(typeCheck(key)))throw new Error(valueError(key,"'{{value}}' is not a valid key for filtering.","Invalid key for filtering."));if(null!=keyNames){if(!["string","number","boolean"].includes(typeCheck(keyNames)))throw new Error(valueError(keyNames,"'{{value}}' is not a valid list of key names for filtering.","Invalid key names for filtering."));keyNames=String(keyNames)}return null!=key&&null!=keyNames&&(keyNames=keyNames.split(/\s*,\s*/),array=array.filter((function(o){var val=mapVariable.call(_this2,o,key)||o[key];return void 0!==val&&keyNames.includes(String(val))}))),array.map((function(o){return mapVariable.call(_this2,o,_value7)||o[_value7]}))},outputs:function(array,value){var spec=void 0;return array&&Array.isArray(array.spec)&&(spec=array.spec.find((function(item){return item.name===value}))),{type:"array",spec:spec}}},shuffle:{type:"array",group:"array",value:function(array){if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));for(var i=(array=array.slice()).length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1)),x=array[i];array[i]=array[j],array[j]=x}return array},outputs:function(array){return array}},sort:{type:"array",group:"array",value:function(array){var key,order,ci,_this3=this;if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));return["asc","desc","asc ci","desc ci"].includes(arguments[1])?(order="asc"===arguments[1]||"asc ci"===arguments[1]?"asc":"desc",key=arguments[2],ci="asc ci"===arguments[1]||"desc ci"===arguments[1]):(order="asc",key=arguments[1]),array.slice().sort((function(a,b){if(key&&(a=mapVariable.call(_this3,a,key)),key&&(b=mapVariable.call(_this3,b,key)),ci){a=String(a).toLowerCase(),b=String(b).toLowerCase();var r=a.localeCompare(b);return"asc"===order?r:1===r?-1:-1===r?1:r}return null==a||null!=a&&a>b?"asc"===order?1:-1:null==b||null!=b&&a<b?"asc"===order?-1:1:0}))},outputs:function(array){return array}},reverse:{type:"array",group:"array",value:function(array){if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));return array.slice().reverse()},outputs:function(array){return array}},first:{type:"array",group:"array",value:function(array){if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));return array[0]},outputs:function(array){return array}},last:{type:"array",group:"array",value:function(array){if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));return array[array.length-1]},outputs:function(array){return array}},flatten:{type:"array",group:"array",value:function(array){if(null==array)return this.passthrough?array:null;if("array"!==typeCheck(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));var depth=arguments[1];if(!["null","undefined","number"].includes(typeCheck(depth)))throw new Error(valueError(depth,"'{{value}}' is not a valid number.","Invalid number."));var flatten=function flatten(array,depth){return null==depth&&(depth=1),array.reduce((function(acc,val){return"array"===typeCheck(val)&&depth>1?acc.concat(flatten(val,depth-1)):acc.concat(val)}),[])};return flatten(array,depth)},outputs:function(array){return array}},distinct:_distinct,deduplicate:_distinct,toCollection:{type:"collection",group:"array",value:function(array,key,_value8){var _this4=this;if(!(array&&key&&_value8))return{};if(!Array.isArray(array))throw new Error(valueError(array,"'{{value}}' is not a valid array.","Invalid array."));if(!["string","number"].includes(typeCheck(key)))throw new Error(valueError(key,"'{{value}}' is not a valid key name.","Invalid key name."));if(!["string","number"].includes(typeCheck(_value8)))throw new Error(valueError(_value8,"'{{value}}' is not a valid value name.","Invalid value name."));if(0===array.length)return{};var results={};return array.forEach((function(o){var k=mapVariable.call(_this4,o,key),v=mapVariable.call(_this4,o,_value8);k&&(results[k]=v)})),results},outputs:function(array){return{type:"collection"}}},toArray:{type:"array",group:"array",value:function(collection){if(!collection||"object"!==_typeof(collection))throw new Error(valueError(collection,"'{{value}}' is not a valid collection.","Invalid collection."));return Array.isArray(collection)?collection.map((function(value,key){return{key:key,value:value}})):Object.entries(collection).map((function(_ref){var arr,i,_ref2=(i=2,function(arr){if(Array.isArray(arr))return arr}(arr=_ref)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||_unsupportedIterableToArray(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{key:_ref2[0],value:_ref2[1]}}))},outputs:function(array){return{type:"array",spec:[{name:"key",type:"string"},{name:"value",type:"collection"}]}}},omit:{type:"collection",group:"general",value:function(obj){for(var _len6=arguments.length,keys=new Array(_len6>1?_len6-1:0),_key6=1;_key6<_len6;_key6++)keys[_key6-1]=arguments[_key6];return obj?keys&&0!==keys.length?(Array.isArray(keys[0])&&(keys=keys[0]),Object.keys(obj).reduce((function(acc,curr){return keys.includes(curr)||(acc[curr]=obj[curr]),acc}),{})):obj:{}},outputs:function(obj){return{type:"collection"}}},pick:{type:"collection",group:"general",value:function(obj){for(var _len7=arguments.length,keys=new Array(_len7>1?_len7-1:0),_key7=1;_key7<_len7;_key7++)keys[_key7-1]=arguments[_key7];return obj&&keys&&0!==keys.length?(Array.isArray(keys[0])&&(keys=keys[0]),keys.reduce((function(acc,curr){return Object.keys(obj).includes(curr)&&(acc[curr]=obj[curr]),acc}),{})):{}},outputs:function(obj){return{type:"collection"}}},md5:{type:"text",group:"string",value:function(data){return"buffer"!==typeCheck(data)&&(data=FUNCTIONS.toBinary.value(data)),crypto.md5(data)}},sha1:{type:"text",group:"string",value:function(data){var outputEncoding=null!=arguments[1]?arguments[1].toLowerCase():void 0,key=arguments[2],keyEncoding=null!=arguments[3]?arguments[3].toLowerCase():void 0;if(["hex","latin1","base64","binary"].includes(outputEncoding)||(outputEncoding="hex"),["text","hex","base64","binary"].includes(keyEncoding)||(keyEncoding="text"),"buffer"!==typeCheck(data)&&(data=FUNCTIONS.toBinary.value(data)),null!=key)if("text"===keyEncoding)key=FUNCTIONS.toBinary.value(key);else if("binary"===keyEncoding){if("buffer"!==typeCheck(key))throw new Error(valueError(keyEncoding,"Key '{{value}}' is not a valid buffer.","Invalid key."))}else key=Buffer.from(FUNCTIONS.toString.value(key),keyEncoding);return crypto.sha1(data,key,outputEncoding)}},sha256:{type:"text",group:"string",value:function(data){var outputEncoding=null!=arguments[1]?arguments[1].toLowerCase():void 0,key=arguments[2],keyEncoding=null!=arguments[3]?arguments[3].toLowerCase():void 0;if(["hex","latin1","base64","binary"].includes(outputEncoding)||(outputEncoding="hex"),["text","hex","base64","binary"].includes(keyEncoding)||(keyEncoding="text"),"buffer"!==typeCheck(data)&&(data=FUNCTIONS.toBinary.value(data)),null!=key)if("text"===keyEncoding)key=FUNCTIONS.toBinary.value(key);else if("binary"===keyEncoding){if("buffer"!==typeCheck(key))throw new Error(valueError(keyEncoding,"Key '{{value}}' is not a valid buffer.","Invalid key."))}else key=Buffer.from(FUNCTIONS.toString.value(key),keyEncoding);return crypto.sha256(data,key,outputEncoding)}},sha512:{type:"text",group:"string",value:function(data){var outputEncoding=null!=arguments[1]?arguments[1].toLowerCase():void 0,key=arguments[2],keyEncoding=null!=arguments[3]?arguments[3].toLowerCase():void 0;if(["hex","latin1","base64","binary"].includes(outputEncoding)||(outputEncoding="hex"),["text","hex","base64","binary"].includes(keyEncoding)||(keyEncoding="text"),"buffer"!==typeCheck(data)&&(data=FUNCTIONS.toBinary.value(data)),key)if("text"===keyEncoding)key=FUNCTIONS.toBinary.value(key);else if("binary"===keyEncoding){if("buffer"!==typeCheck(key))throw new Error(valueError(keyEncoding,"Key '{{value}}' is not a valid buffer.","Invalid key."))}else key=Buffer.from(FUNCTIONS.toString.value(key),keyEncoding);return crypto.sha512(data,key,outputEncoding)}},base64:{type:"text",group:"string",value:function(data){return"buffer"!==typeCheck(data)&&(data=FUNCTIONS.toString.value(data)),"undefined"!=typeof window?encodeBase64(data):Buffer.from(data).toString("base64")}}}},{"./../shims/moment-timezone.js":67,"./base64":2,"./bytes":3,"./compare.js":4,"./crypto":5,"./utils.js":13,"@integromat/dateparser":15}],9:[function(require,module,exports){"use strict";function _toConsumableArray(arr){return function(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _toPropertyKey(arg){var key=function(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,"string");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(input)}(arg);return"symbol"===_typeof(key)?key:String(key)}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var _require=require("./utils.js"),parseUnknown=_require.parseUnknown,splitVariable=_require.splitVariable,mapVariable=_require.mapVariable,unescape=_require.unescape,escape=_require.escape,escapeable=_require.escapeable,concatenate=_require.concatenate,escapeHTML=_require.escapeHTML,isNumber=_require.isNumber,pathToString=_require.pathToString,typeCheck=_require.typeCheck,IMLError=require("./errors.js").IMLError,compare=require("./compare.js"),ALT_OPS={"&&":"&","||":"|","==":"=","===":"=","!==":"!="},DEFAULT_FLAGS={keepUnwantedOperators:!1},IMLArray=function IMLArray(source,defaults,flags){var a=[];for(var key in defaults=Object.assign({},IML.defaults,defaults),flags=Object.assign({},DEFAULT_FLAGS,flags),Object.defineProperty(a,"__imlAst__",{enumerable:!1,value:!0}),Object.defineProperty(a,"toJSON",{enumerable:!1,value:function(){return null!=source?source:"{{}}"}}),Object.defineProperty(a,"push",{enumerable:!1,value:function(node){if(!flags.keepUnwantedOperators){var length=this.length;if("operator"===node.type&&"!"!==node.name){if(0===length)return IML.errors.push(new IMLError("Operator on beginning of an expression.")),node;if("operator"===this[length-1].type)return IML.errors.push(new IMLError("Operator next to operator.")),node}}return Array.prototype.push.call(a,node)}}),Object.defineProperty(a,"clone",{enumerable:!1,value:function(deep){if(deep)throw new Error("Not implemented.");var _step,cloned=IMLArray(source,defaults,flags),_iterator=_createForOfIteratorHelper(this);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;cloned.push(item)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return cloned}}),Object.defineProperty(a,"derive",{enumerable:!1,value:function(){return IMLArray(source,defaults,flags)}}),defaults)Object.prototype.hasOwnProperty.call(defaults,key)&&Object.defineProperty(a,key,{enumerable:!1,writable:!0,value:defaults[key]});return a},IML=function(){function IML(){_classCallCheck(this,IML)}return _createClass(IML,null,[{key:"isAST",value:function(object){return(null!=object?object.__imlAst__:void 0)&&Array.isArray(object)}},{key:"validateName",value:function(name){return name?("number"==typeof name&&(name=name.toString()),"string"!=typeof name?"":(name=name.replace(/[^_a-z0-9]/gi,"_"),/^\d/.test(name)&&(name="_".concat(name)),name)):null!=name?name:""}},{key:"parse",value:function(text,links,defaults,flags){var _IML$errors2,nodes,keepUnwantedOperators=(flags=Object.assign({},DEFAULT_FLAGS,flags)).keepUnwantedOperators;if(IML.errors=[],null==text)return IMLArray(null,defaults,flags);if("object"===_typeof(text)||"function"==typeof text){if(!(text instanceof Date))return IML.errors.push(new IMLError("Expected string, got ".concat(_typeof(text),"."))),IMLArray(null,defaults,flags);text=text.toISOString()}if("string"!=typeof text&&(text=String(text)),0===text.length)return(nodes=IMLArray("",defaults,flags)).push({type:"text",value:""}),nodes;if(-1===text.indexOf("{{")||-1===text.indexOf("}}"))return(nodes=IMLArray(text,defaults,flags)).push({type:"text",value:text}),nodes;var length=text.length,cursor=-1;nodes=IMLArray(text,defaults,flags);for(var related,buffer="",incode=!1,incodetimes=0,incodestart=null,instring=!1,inescape=!1,escaped="",instringchar=null,errors=null,parent=null,parents=[],relatedWithVariable=function(related){return related&&"variable"===related.type};++cursor<length;){var char=text.charAt(cursor);if(inescape){if("`"!==char){escaped+=char,buffer+=char;continue}if("`"===char&&"`"===text.charAt(cursor+1)){cursor++,escaped+="``",buffer+="``";continue}}switch(char){case"{":if(instring||incode||"{"!==text.charAt(cursor+1))if(!instring&&incode&&"{"===text.charAt(cursor+1)){for(related=null,errors=[],parent=null,parents.length&&parents.splice(0,parents.length),nodes=nodes.slice(0,incodestart.node);"{"===text.charAt(1+ ++cursor););nodes.length&&"text"===nodes[nodes.length-1].type?nodes[nodes.length-1].value+=text.substring(incodestart.cursor,cursor-1):nodes.push({type:"text",value:text.substring(incodestart.cursor,cursor-1)}),incodestart={cursor:cursor-1,node:nodes.length},buffer=""}else buffer+=char;else{for(incode=!0,incodetimes++,related=null,errors=[];"{"===text.charAt(1+ ++cursor);)buffer+="{";buffer.length&&nodes.push({type:"text",value:buffer}),incodestart={cursor:cursor-1,node:nodes.length},buffer=""}break;case"}":var _IML$errors;!instring&&incode&&"}"===text.charAt(cursor+1)?(cursor++,incode=!1,incodestart=null,(_IML$errors=IML.errors).push.apply(_IML$errors,_toConsumableArray(errors)),errors=[],parent&&IML.errors.push(new IMLError("Unclosed function at position ".concat(cursor-1,"."))),(buffer=buffer.trim()).length&&(((related?related.path:null)||parent||nodes).push(parseUnknown(buffer,links,IML.errors,relatedWithVariable(related))),related=null),buffer="",related=null):buffer+=char;break;case"(":if(!instring&&incode){buffer=buffer.trim(),parent&&parents.push(parent);var args=IMLArray(null,defaults,flags);args.type="argument";var fce={type:"function",name:buffer,arguments:[args]};(parent||nodes).push(fce),parent=args,parents.push(fce),related=null,buffer=""}else buffer+=char;break;case"[":if(!instring&&incode){(buffer=buffer.trim()).length||related||errors.push(new IMLError("Unexpected [ at ".concat(cursor-1,"."))),parent&&parents.push(parent);var property=IMLArray(null,defaults,flags);if(property.type="property",related)buffer.length&&related.path.push(parseUnknown(buffer,links,IML.errors,relatedWithVariable(related))),related.path.push(property),parent=property,parents.push(related),related=null;else{var variable=parseUnknown(buffer,links,IML.errors);variable.path=[{type:"variable",name:variable.name},property],Object.defineProperty(variable,"name",{get:pathToString}),(parent||nodes).push(variable),parent=property,parents.push(variable)}buffer=""}else buffer+=char;break;case")":case"]":!instring&&incode?parent?((buffer=buffer.trim()).length?!related||parent.length<1?parent.push(parseUnknown(buffer,links,IML.errors,relatedWithVariable(related))):(((related?related.path:null)||parent||nodes).push(parseUnknown(buffer,links,IML.errors,relatedWithVariable(related))),related=null):parent[parent.length-1]&&"operator"===parent[parent.length-1].type&&!keepUnwantedOperators&&(parent.pop(),errors.push(new IMLError("Operator on end of an expression."))),buffer="",parent=null,parents.length&&("]"===char&&"."===text.charAt(cursor+1)?(related=parents.pop(),cursor++):"]"===char&&"["===text.charAt(cursor+1)?related=parents.pop():(parents.pop(),related=null),parent=parents.pop())):errors.push(new IMLError("Unexpected function close at position ".concat(cursor-1,"."))):buffer+=char;break;case"+":case"-":case"*":case"/":case"=":case"!":case"&":case"|":case">":case"<":case"%":if("-"===char){if(isNumber(text.charAt(cursor+1))&&/^\s*$/.test(buffer)){buffer+=char;continue}}else"!"===char?"="===text.charAt(cursor+1)&&(char+=text.charAt(++cursor),"="===text.charAt(cursor+1)&&(char+=text.charAt(++cursor))):"+"===char&&"+"===text.charAt(cursor+1)||"<"===char&&"="===text.charAt(cursor+1)||">"===char&&"="===text.charAt(cursor+1)||"&"===char&&"&"===text.charAt(cursor+1)||"|"===char&&"|"===text.charAt(cursor+1)?char+=text.charAt(++cursor):"="===char&&"="===text.charAt(cursor+1)&&("="===text.charAt(cursor+2)&&(char+=text.charAt(++cursor)),char+=text.charAt(++cursor));!instring&&incode?((buffer=buffer.trim()).length&&(((related?related.path:null)||parent||nodes).push(parseUnknown(buffer,links,IML.errors,relatedWithVariable(related))),related=null),(parent||nodes).push({type:"operator",name:ALT_OPS[char]||char}),buffer=""):buffer+=char;break;case";":case",":!instring&&incode?"argument"===(null!=parent?parent.type:void 0)?((buffer=buffer.trim()).length&&(((related?related.path:null)||parent||nodes).push(parseUnknown(buffer,links,IML.errors,relatedWithVariable(related))),related=null),buffer="",(parent=[]).type="argument",parents[parents.length-1].arguments.push(parent)):errors.push(new IMLError("Unexpected argument separator at position ".concat(cursor-1,"."))):buffer+=char;break;case'"':case"'":if(incode){if(instring&&char!==instringchar){buffer+=char;continue}instring?char===text.charAt(cursor+1)?(buffer+=char,cursor++):(instring=!1,instringchar=null,(parent||nodes).push({type:"string",value:buffer}),buffer=""):(instring=!0,instringchar=char,(buffer=buffer.trim()).length&&(((related?related.path:null)||parent||nodes).push(parseUnknown(buffer,links,IML.errors,relatedWithVariable(related))),related=null),buffer="")}else buffer+=char;break;case" ":!instring&&incode?((buffer=buffer.trim()).length&&(((related?related.path:null)||parent||nodes).push(parseUnknown(buffer,links,IML.errors,relatedWithVariable(related))),related=null),buffer=""):buffer+=char;break;case"`":if(!instring&&incode){if(inescape&&!escapeable(escaped)){buffer=buffer.substr(0,buffer.length-(escaped.length+1))+escaped,inescape=!1,escaped="";continue}inescape=!inescape,escaped=""}buffer+=char;break;default:buffer+=char}}return incode&&((nodes=nodes.slice(0,incodestart.node)).length&&"text"===nodes[nodes.length-1].type?nodes[nodes.length-1].value+=text.substr(incodestart.cursor):nodes.push({type:"text",value:text.substr(incodestart.cursor)}),buffer=""),buffer.length?nodes.push({type:"text",value:buffer}):keepUnwantedOperators||nodes[nodes.length-1]&&"operator"===nodes[nodes.length-1].type&&(nodes.pop(),errors.push(new IMLError("Operator on end of an expression."))),1===incodetimes&&(nodes.length&&"text"===nodes[0].type&&/^\s*$/.test(nodes[0].value)&&nodes.shift(),nodes.length&&"text"===nodes[nodes.length-1].type&&/^\s*$/.test(nodes[nodes.length-1].value)&&nodes.pop()),(_IML$errors2=IML.errors).push.apply(_IML$errors2,_toConsumableArray(errors)),nodes}},{key:"stringify",value:function(value,links){var flags=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_flags3=flags=Object.assign({},DEFAULT_FLAGS,flags),keepUnwantedOperators=_flags3.keepUnwantedOperators;IML.errors=[];var incode=!1,iterate=function iterate(nodes,level){null==level&&(level=1);for(var last,code="",index=0;index<nodes.length;index++){var node=nodes[index];switch(node.type){case"variable":incode?1===level&&"operator"!==last.type&&(code+="}}{{"):(incode=!0,code+="{{"),node.path?code+=node.path.map((function(item,index){return"variable"===item.type?(0===index?"":".")+item.name:"property"!==item.type?"":0===item.length?"[]":"[".concat(iterate(item,level+1),"]")})).join(""):code+=node.name;break;case"link":incode?1===level&&"operator"!==last.type&&(code+="}}{{"):(incode=!0,code+="{{"),code+=null!=links?node.name.replace(/\$([^.]+)/g,(function(a,b){return links[b]?links[b]:b})):node.name;break;case"function":incode?1===level&&"operator"!==last.type&&(code+="}}{{"):(incode=!0,code+="{{"),code+="".concat(node.name,"("),code+=node.arguments.map((function(item){return iterate(item,level+1)})).join("; "),code+=")";break;case"operator":if(incode){if(1===level&&"operator"!==last.type&&"!"===node.name)code+="}}{{";else{var lastChar=code.charAt(code.length-1);"!"===node.name&&code.length&&" "!==lastChar&&"!"!==lastChar&&(code+=" ")}"!"===node.name?code+="!":code+=" ".concat(node.name," ")}else incode=!0,code+="{{",keepUnwantedOperators?code+=node.name:"!"===node.name&&(code+="!");break;case"text":incode&&(incode=!1,code+="}}"),code+=node.value;break;case"string":case"number":case"keyword":incode?1===level&&"operator"!==last.type&&(code+="}}{{"):(incode=!0,code+="{{"),"string"===node.type?code+='"'.concat(node.value.replace(/\"/g,'""'),'"'):"number"===node.type?code+=node.value.toString():code+=node.name}last=node}return code},stringified=iterate(value);return incode&&(stringified+="}}"),stringified}},{key:"execute",value:function(ast,data,options){if(options||(options={}),options=Object.assign({variables:{}},IML.options,options),!ast)return options.passthrough?void 0:null;if("string"==typeof ast&&(ast=IML.parse(ast)),!IML.isAST(ast))throw new IMLError("Invalid AST!");var context={timezone:options.timezone||ast.timezone,passthrough:options.passthrough||!1};if(!ast.length)return options.passthrough?void 0:null;var evaluate=function(node){var func;switch(node.type){case"link":throw new IMLError("Found link '".concat(node.name,"' is AST!"));case"variable":return IML.VARIABLES[node.name]?IML.VARIABLES[node.name].value instanceof Function?IML.VARIABLES[node.name].value():IML.VARIABLES[node.name].value:options.variables[node.name]?options.variables[node.name]:(path=node.path?node.path.map((function(item,index){return"variable"===item.type?(0===index?"":".")+item.name:"property"!==item.type?"":0===item.length?(0===index?"":".")+"`1`":(0===index?"":".")+escape("".concat(iterate(item)))})).join(""):node.name,mapVariable.call(context,data,path));var path;case"function":if(!(func=options.functions&&Object.prototype.hasOwnProperty.call(options.functions,node.name)?options.functions[node.name]:ast.functions&&Object.prototype.hasOwnProperty.call(ast.functions,node.name)?ast.functions[node.name]:Object.prototype.hasOwnProperty.call(IML.FUNCTIONS,node.name)?IML.FUNCTIONS[node.name].value:void 0))throw new IMLError("Function '".concat(node.name,"' not found!"));if(func===Function||func===eval)throw new IMLError("Function '".concat(node.name,"' is not executable!"));try{var args;if("if"===node.name)return(args=node.arguments.slice(0)).length&&(args[0]=iterate(args[0])),iterate(func.apply(context,args));if("ifempty"===node.name){(args=node.arguments.slice(0)).length&&(args[0]=iterate(args[0]));var res=func.apply(context,args);return res===args[0]?res:iterate(res)}return args=(node.arguments||[]).map((function(arg){return iterate(arg)})),func.apply(context,args)}catch(ex){var err=new IMLError("Function '".concat(node.name,"' finished with error! ").concat(ex.message));throw err.imtInternalError=ex,err}case"text":case"string":case"number":return node.value;case"keyword":return"function"==typeof IML.KEYWORDS[node.name].value?IML.KEYWORDS[node.name].value():IML.KEYWORDS[node.name].value}return options.passthrough?void 0:null},operate=function operate(operation,lhs){for(var higherPrecedenceOnly=arguments.length>2&&void 0!==arguments[2]&&arguments[2];operation.length;){for(var op=operation.shift(),rhs=operation.shift();operation.length&&operation[0].precedence>op.precedence;)rhs=operate(operation,rhs,!0);if(higherPrecedenceOnly)return op.value(lhs,rhs);lhs=op.value(lhs,rhs)}return lhs},iterate=function(nodes){if(!Array.isArray(nodes))return options.passthrough?void 0:null;for(var index=0,res=[];index<nodes.length;){var node=nodes[index++];if("operator"===node.type&&"!"!==node.name){if(res.length){for(var operation=[res.pop()];node&&"operator"===node.type;){if(!IML.OPERATORS[node.name])throw new IMLError("Operator '".concat(node.name,"' not found!"));operation.push(IML.OPERATORS[node.name]),node=nodes[index++];for(var negate=!1,doubleNegate=!1;node&&"operator"===node.type&&"!"===node.name;)negate&&(doubleNegate=!doubleNegate),negate=!0,node=nodes[index++];var evaluated=evaluate(node);negate&&(evaluated=!evaluated),doubleNegate&&(evaluated=!evaluated),operation.push(evaluated),node=nodes[index++]}res.push(operate(operation,operation.shift())),index--}}else{for(var _negate=!1,_doubleNegate=!1;node&&"operator"===node.type&&"!"===node.name;)_negate&&(_doubleNegate=!_doubleNegate),_negate=!0,node=nodes[index++];if(!node)continue;if("operator"===node.type)throw new Error("Operator next to not operator.");var _evaluated=evaluate(node);_negate&&(_evaluated=!_evaluated),_doubleNegate&&(_evaluated=!_evaluated),res.push(_evaluated)}}return 0===res.length?options.passthrough?void 0:null:1===res.length?res[0]:res.map(options.concat||concatenate).join("")};return iterate(ast)}},{key:"filter",value:function(orFilters,bundle,concat){var orReport=[];if(!orFilters)return{match:!0,report:orReport};if(!Array.isArray(orFilters))return{match:!0,report:orReport};if(!orFilters.length)return{match:!0,report:orReport};for(var i=0;i<orFilters.length;i++){var andFilters=orFilters[i],truthy=!0,andReport=[];orReport.push(andReport);for(var iterable=null!=andFilters?andFilters:[],ii=0;ii<iterable.length;ii++){var result=void 0,filter=iterable[ii],context={timezone:filter.a&&filter.a.timezone||filter.b&&filter.b.timezone};try{var a=IML.execute(filter.a,bundle,concat),b=IML.execute(filter.b,bundle,concat);result=compare.call(context,a,b,filter.o)}catch(ex){throw new IMLError("Failed to evaluate filter '".concat(i,"-").concat(ii,"': ").concat(ex.message))}if(andReport.push(result),!result){truthy=!1;break}}if(truthy)return{match:!0,report:orReport}}return{match:!1,report:orReport}}},{key:"references",value:function(ast,create,modules){if(null==create&&(create=!1),null==modules&&(modules={}),IML.errors=[],!IML.isAST(ast)){if("string"!=typeof ast)return IML.errors.push(new IMLError("Invalid IML.")),modules;ast=IML.parse(ast)}return function iterate(nodes){var _step2,_iterator2=_createForOfIteratorHelper(nodes);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var node=_step2.value;switch(node.type){case"variable":if(!IML.VARIABLES[node.name]){var cur=void 0,variable=void 0;if(/^([0-9]+)\.(.*)$/.exec(node.name)){var id=RegExp.$1;if(variable=RegExp.$2,!modules[id]){if(!create){IML.errors.push(new IMLError("Variable '".concat(node.name,"' references not existing module '").concat(id,"'.")));continue}modules[id]={}}cur=modules[id]}else variable=node.name,cur=modules;for(variable=splitVariable(variable);variable.length;){var v=variable.shift();/^(.*)\[\d*\]$/.exec(v)&&(v=RegExp.$1,variable=[]),variable.length?cur=!0===cur[v]?cur[v]={}:null!=cur[v]?cur[v]:cur[v]={}:cur[v]=!0}}break;case"function":var _step3,_iterator3=_createForOfIteratorHelper(node.arguments||[]);try{for(_iterator3.s();!(_step3=_iterator3.n()).done;)iterate(_step3.value)}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}return modules}(ast)}},{key:"outputs",value:function(ast){if(!IML.isAST(ast))throw new IMLError("Invalid AST!");if(!ast.length)return{type:"null"};var evaluate=function(node){switch(node.type){case"variable":return{type:"variable",name:node.name};case"function":if(!IML.FUNCTIONS[node.name])return{type:"*"};var args=(node.arguments||[]).map((function(arg){return iterate(arg)})),outputs=IML.FUNCTIONS[node.name].outputs;return outputs&&(outputs=outputs.apply(null,args)),outputs||(outputs={type:IML.FUNCTIONS[node.name].type}),outputs;case"text":case"string":return{type:"text"};case"number":return{type:"number"};case"keyword":return{type:IML.KEYWORDS[node.name].type}}return null},operate=function operate(operation,lhs){var op=operation.shift(),rhs=operation.shift();return operation.length&&operation[0].precedence>op.precedence&&(rhs=operate(operation,rhs)),operation.length?op!==IML.OPERATORS["+"]||"text"!==lhs.type&&"text"!==rhs.type?operate(operation,op.type):operate(operation,{type:"text"}):op!==IML.OPERATORS["+"]||"text"!==lhs.type&&"text"!==rhs.type?{type:op.type}:{type:"text"}},iterate=function(nodes){for(var index=0,res=[];index<nodes.length;){var node=nodes[index++];switch(node.type){case"operator":if(res.length){for(var operation=[res.pop()];"operator"===(null!=node?node.type:void 0);){if(!IML.OPERATORS[node.name])throw new IMLError("Operator '".concat(node.name,"' not found!"));operation.push(IML.OPERATORS[node.name]),operation.push(evaluate(nodes[index++])),node=nodes[index++]}res.push(operate(operation,operation.shift())),index--}break;default:res.push(evaluate(node))}}return 0===res.length?{type:"null"}:1===res.length?res[0]:{type:"text"}};return iterate(ast)}},{key:"wrap",value:function(ast,func){if(!IML.isAST(ast))throw new IMLError("Invalid AST!");if(this.isWrapped(ast,func))return ast;var args=[ast=ast.clone()];args.type="argument";var wrapper=ast.derive();wrapper.push({type:"function",name:func,arguments:args});for(var index=0;index<ast.length;)"text"===ast[index].type&&(ast[index]={type:"string",value:ast[index].value},0===index&&ast.length>1?(ast.splice(index+1,0,{type:"operator",name:"+"}),index++):index>0&&ast.splice(index,0,{type:"operator",name:"+"})),index++;return wrapper}},{key:"unwrap",value:function(ast,func){if(!IML.isAST(ast))throw new IMLError("Invalid AST!");if(!this.isWrapped(ast,func))return ast;ast=ast[0].arguments[0].clone();for(var index=0;index<ast.length;)"string"===ast[index].type&&(ast[index]={type:"text",value:ast[index].value},index>0&&"operator"===ast[index-1].type&&(ast.splice(index-1,1),index--),index+1<ast.length&&"operator"===ast[index+1].type&&ast.splice(index+1,1)),index++;return ast}},{key:"isWrapped",value:function(ast,func){if(!IML.isAST(ast))throw new IMLError("Invalid AST!");return 1===ast.length&&"function"===ast[0].type&&ast[0].name===func}},{key:"containsIML",value:function(text){return text.indexOf("{{")>-1&&text.indexOf("}}")>-1}},{key:"replace",value:function(ast,type,find,_replace){if(!IML.isAST(ast))throw new IMLError("Invalid AST!");var obj,key,value,list="object"===_typeof(find)?find:(obj={},value=_replace,(key=_toPropertyKey(key=find))in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj);return function iterate(nodes){var _step4,_iterator4=_createForOfIteratorHelper(nodes);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var node=_step4.value;if("function"!==node.type){for(var _find in list)if(list.hasOwnProperty(_find)){var replace=list[_find];switch(node.type){case"keyword":"keyword"===type&&_find===node.name&&(node.name=replace);break;case"variable":if("variable"===type&&_find===node.name)if(node.path){var replacer=IML.parse("{{".concat(replace,"}}"))[0];node.path=replacer.path}else node.name=replace;else if("reference"===type&&!IML.VARIABLES[node.name]&&0===node.name.indexOf("".concat(_find,"."))){var realNode=node.path?node.path[0]:node;if(realNode._referenceReplaced)break;realNode.name="".concat(replace,".").concat(realNode.name.substr(String(_find).length+1)),realNode._referenceReplaced=!0}}}}else{var _step5,_iterator5=_createForOfIteratorHelper(node.arguments||[]);try{for(_iterator5.s();!(_step5=_iterator5.n()).done;)iterate(_step5.value)}catch(err){_iterator5.e(err)}finally{_iterator5.f()}}}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}(ast),ast}},{key:"KEYWORDS",get:function(){return require("./keywords.js")}},{key:"FUNCTIONS",get:function(){return require("./functions.js")}},{key:"OPERATORS",get:function(){return require("./operators.js")}},{key:"VARIABLES",get:function(){return require("./variables.js")}},{key:"FILTERS",get:function(){return require("./filters.js")}},{key:"options",set:function(newOptions){IML._options=newOptions||{}},get:function(){return IML._options||{}}}]),IML}();IML.errors=[],IML.defaults=null,IML.Array=IMLArray,IML._escape=escape,IML._unescape=unescape,IML._mapVariable=mapVariable,IML._splitVariable=splitVariable;var SIML=function(){function SIML(){_classCallCheck(this,SIML)}return _createClass(SIML,null,[{key:"execute",value:function(text,data,escape){return null==text&&(text=""),null==escape&&(escape=!1),String(text).replace(/{{([^}]*)}}/g,(function(p){var value;if(!data)return"";var key=p.substr(2,p.length-4).split(".");if(key.length>1){for(var cur=data;cur&&key.length;)cur=cur[key.shift()];value=null!=cur?cur:""}else value=data[key[0]];return escape&&(value=escapeHTML(value)),value}))}},{key:"resolveContext",value:function(){var spec=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},context={};function resolveValue(value,pre,siml,post){return value&&"string"===typeCheck(value)?post.length>0?value.slice(pre.length,-post.length):value.slice(pre.length):value}function resolveContext(text,value){if((text.match(/{{([^}]*)}}/g)||[]).length>1)throw new Error("String contains more than one SIML expression.");String(text).replace(/(.*?){{([^}]*)}}(.*)/,(function(m,pre,siml,post){if(!/^[^.]+(\.[^.]+)*$/.test(siml))throw new Error("Invalid SIML.");var path=siml.split("."),cur=context;path.forEach((function(k,i){i<path.length-1?cur=cur[k]=cur[k]||{}:cur[k]=resolveValue(value,pre,0,post)}))}))}function findSIML(spec,data){Object.keys(spec).forEach((function(key){var sp=spec[key],dt=data&&data[key];switch(typeCheck(sp)){case"string":IML.containsIML(sp)&&resolveContext(sp,dt);break;case"object":findSIML(sp,dt)}}))}return findSIML(spec,data),context}}]),SIML}();exports.IML=IML,exports.SIML=SIML,exports.IMLError=IMLError;var IMLTree=require("./tree").IMLTree;exports.IMLTree=IMLTree},{"./compare.js":4,"./errors.js":6,"./filters.js":7,"./functions.js":8,"./keywords.js":10,"./operators.js":11,"./tree":12,"./utils.js":13,"./variables.js":14}],10:[function(require,module,exports){"use strict";module.exports={true:{type:"boolean",group:"general",value:!0},false:{type:"boolean",group:"general",value:!1},space:{type:"text",group:"string",value:" "},nbsp:{type:"text",group:"string",value:String.fromCharCode(160)},tab:{type:"text",group:"string",value:"\t"},emptystring:{type:"text",group:"string",value:function(){return new String("")}},newline:{type:"text",group:"string",value:"\n"},carriagereturn:{type:"text",group:"string",value:"\r"},undefined:{type:"*",group:"general",value:void 0,hidden:!0},ignore:{type:"*",group:"general",value:void 0},null:{type:"*",group:"general",value:null},erase:{type:"*",group:"general",value:null},emptyarray:{type:"*",group:"array",value:function(){return[]}},erasearray:{type:"*",group:"array",value:function(){return[]},hidden:!0}}},{}],11:[function(require,module,exports){"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}var Decimal=require("decimal.js");module.exports={"!":{type:"boolean",group:"general",label:"not",precedence:16,hidden:!0},"*":{type:"number",group:"math",precedence:14,value:function(a,b){return new Decimal(Number(a)).times(new Decimal(Number(b))).toNumber()}},"/":{type:"number",group:"math",precedence:14,value:function(a,b){return new Decimal(Number(a)).dividedBy(new Decimal(Number(b))).toNumber()}},"%":{type:"number",group:"math",label:"mod",precedence:14,value:function(a,b){return new Decimal(Number(a)).modulo(new Decimal(Number(b))).toNumber()}},"+":{type:"number",group:"math",precedence:13,value:function(a,b){return null==a&&null==b?null:null!=a&&null!=b||!["number","string","boolean"].includes(_typeof(null!=a?a:b))?"number"==typeof a&&"number"==typeof b?new Decimal(a).plus(new Decimal(b)).toNumber():a+b:null!=a?a:b}},"++":{type:"number",group:"math",precedence:13,value:function(a,b){return new Decimal(Number(a)).plus(new Decimal(Number(b))).toNumber()}},"-":{type:"number",group:"math",precedence:13,value:function(a,b){return new Decimal(Number(a)).minus(new Decimal(Number(b))).toNumber()}},"<":{type:"boolean",group:"math",precedence:11,value:function(a,b){return a<b}},"<=":{type:"boolean",group:"math",precedence:11,value:function(a,b){return a<=b}},">":{type:"boolean",group:"math",precedence:11,value:function(a,b){return a>b}},">=":{type:"boolean",group:"math",precedence:11,value:function(a,b){return a>=b}},"=":{type:"boolean",group:"general",precedence:10,value:function(a,b){return a==b}},"!=":{type:"boolean",group:"general",precedence:10,value:function(a,b){return a!=b}},"&":{type:"boolean",group:"general",label:"and",precedence:6,value:function(a,b){return a&&b}},"|":{type:"boolean",group:"general",label:"or",precedence:5,value:function(a,b){return a||b}}}},{"decimal.js":18}],12:[function(require,module,exports){"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,undefined);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,undefined):void 0}}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(_e2){didErr=!0,err=_e2},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(void 0,key=function(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,"string");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(input)}(descriptor.key),"symbol"===_typeof(key)?key:String(key)),descriptor)}var key}var IML=require("./iml").IML,IMLTree=function(){function IMLTree(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IMLTree)}var Constructor,staticProps;return Constructor=IMLTree,staticProps=[{key:"parse",value:function(source){return JSON.parse(JSON.stringify(source),(function(key,value){return""===key?value:"string"==typeof value?IML.parse(value):"object"===_typeof(value)&&null!==value?IMLTree.parse(value):value}))}},{key:"execute",value:function(tree,context,options){var obj={};return IML.isAST(tree)?IML.execute(tree,context,options):Array.isArray(tree)?tree.map((function(item){return IMLTree.execute(item,context,options)})):(Object.keys(tree).forEach((function(key){IML.isAST(tree[key])?obj[key]=IML.execute(tree[key],context,options):"object"===_typeof(tree[key])&&null!==tree[key]?obj[key]=IMLTree.execute(tree[key],context,options):obj[key]=tree[key]})),obj)}},{key:"evaluate",value:function(source,context,options){return JSON.parse(JSON.stringify(source),(function(key,value){return""===key?value:"string"==typeof value?IML.execute(IML.parse(value),context,options):"object"===_typeof(value)&&null!==value?IMLTree.evaluate(value,context,options):value}))}},{key:"replace",value:function(source,type,find,_replace){return JSON.parse(JSON.stringify(source),(function(key,value){return""===key?value:"string"==typeof value?IML.stringify(IML.replace(IML.parse(value),type,find,_replace)):"object"===_typeof(value)&&null!==value?IMLTree.replace(value,type,find,_replace):value}))}},{key:"references",value:function(tree,create){var modules=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(IML.isAST(tree)||"string"==typeof tree||tree instanceof String)return IML.references(tree,create,modules),modules;if(Array.isArray(tree)){var _step,_iterator=_createForOfIteratorHelper(tree);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;IMLTree.references(item,create,modules)}}catch(err){_iterator.e(err)}finally{_iterator.f()}return modules}return Object.keys(tree).forEach((function(key){IML.isAST(tree[key])||"string"==typeof tree[key]||tree[key]instanceof String?IML.references(tree[key],create,modules):"object"===_typeof(tree[key])&&null!==tree[key]&&IMLTree.references(tree[key],create,modules)})),modules}}],null&&_defineProperties(Constructor.prototype,null),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),IMLTree}();exports.IMLTree=IMLTree},{"./iml":9}],13:[function(require,module,exports){"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var IMLError=require("./errors.js").IMLError,KEYWORDS=require("./keywords.js"),isBufferLike=require("./bytes").isBufferLike;function splitVariable(variable){return-1===(variable=String(variable)).indexOf("`")?variable.split("."):variable.split(/\.(?=(?:[^`]*`[^`]*`)*[^`]*$)/g).map(unescape)}function typeCheck(variable){if(null===variable)return"null";if(void 0===variable)return"undefined";switch(_typeof(variable)){case"number":return"number";case"boolean":return"boolean";case"string":return isNumber(variable)?"number":"string";case"object":return Array.isArray(variable)?"array":variable instanceof Date?"date":variable instanceof String?"string":variable instanceof Number?"number":variable instanceof Boolean?"boolean":isBufferLike(variable)?"buffer":"object";default:return"unknown"}}var isNumberStrict=function(variable){return"number"===typeCheck(variable)&&"number"==typeof variable};function unescape(value){return null==value?value:"string"!=typeof value?"":(/^`(.*)`(\[.*\])?$/.exec(value)&&(value=RegExp.$1.replace(/``/g,"`")+RegExp.$2),value)}function valueError(value,show,hide){var type=typeCheck(value);switch(type){case"number":case"boolean":value=String(value);break;case"date":value=value.toISOString();break;case"array":case"object":case"buffer":value="{".concat(type,"}");break;case"string":if(value.length>100)return hide;break;case"null":case"undefined":value="{empty}";break;default:return hide}return show.replace(/\{\{value\}\}/g,value)}function isNumber(value){return/^\-?\d+(\.\d+)?$/.test(value)}var PRIMITIVE_TYPES=new Set(["undefined","boolean","number","string","bigint"]);function isPrimitive(item){return null===item||PRIMITIVE_TYPES.has(_typeof(item))||item instanceof Number}module.exports={isNumberOrNumberAsString:function(number){return"number"===typeCheck(number)},validateAndTransformNumberEntries:function(entryNumbers){if("array"!==typeCheck(entryNumbers))throw new Error(valueError(entryNumbers,"'{{numbers}}' is not list of numbers.","Invalid numbers."));return("array"===typeCheck(entryNumbers[0])?entryNumbers.flat():entryNumbers).map((function(number){if(!isNumberStrict(number))throw new Error(valueError(number,"'{{number}}' is not a valid number.","Invalid number."));return number}))},isNumberStrict:isNumberStrict,parseUnknown:function(buffer,links,errors){var relatedWithVariable=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("$"===buffer[0]){var link,cursor=buffer.indexOf(".");if(-1===cursor)null==links[link=buffer.substr(1)]&&errors.push(new IMLError("Linked source not found '".concat(buffer,"'."))),buffer=null!=links[link]?links[link]:"?";else{if(null==links)return{type:"link",name:buffer};link=buffer.substr(1,cursor-1),buffer=(null!=links[link]?links[link]:"?")+buffer.substr(cursor)}}return isNumber(buffer)?relatedWithVariable?{type:"variable",name:buffer}:{type:"number",value:parseFloat(buffer)}:!relatedWithVariable&&KEYWORDS[buffer]?{type:"keyword",name:buffer}:{type:"variable",name:buffer}},splitVariable:splitVariable,mapVariable:function(data,key){if(!this)throw new Error("Invalid invocation.");if(null==data){if(this.passthrough&&!1===this.passthrough.null)return;return this.passthrough?data:null}for(key=splitVariable(key);key.length;){var k=key.shift(),n=null;if(["prototype","constructor","__proto__","__super__"].includes(k))return this.passthrough?void 0:null;if(/\[(\d+)?\]$/.exec(k)&&(n=RegExp.$1?parseInt(RegExp.$1):1,k=k.substr(0,k.length-RegExp.$1.length-2)),""===k&&Array.isArray(data)&&null!=n)data=data[n-1];else{if(Array.isArray(data)){if(k=parseInt(k),isNaN(k))return this.passthrough?void 0:null;data=data[k-1]}else data=Object.prototype.hasOwnProperty.call(data,k)&&!isPrimitive(data)?data[k]:isPrimitive(data)?data:void 0;if("function"==typeof data)return this.passthrough?void 0:null;null!=n&&Array.isArray(data)&&(data=data[n-1])}if("function"==typeof data)return this.passthrough?void 0:null;if(null==data){if(this.passthrough&&!1===this.passthrough.null)return;return this.passthrough?data:null}}if(null==data){if(this.passthrough&&!1===this.passthrough.null)return;return this.passthrough?data:null}return data},typeCheck:typeCheck,deepEqual:function deepEqual(a,b){if(null==a||null==b)return null!=a==(null!=b);switch(_typeof(a)){case"string":case"number":case"boolean":return String(a)===String(b);case"object":if("object"!==_typeof(b))return!1;if(a instanceof Array){if(!(b instanceof Array))return!1;if(a.length!==b.length)return!1;if(0===a.length)return!0;for(var index=0;index<a.length;index++)if(!deepEqual(a[index],b[index]))return!1}else{if(a instanceof Date)return b instanceof Date&&a.getTime()===b.getTime();var aLength=Object.keys(a).length;if(aLength!==Object.keys(b).length)return!1;if(0===aLength)return!0;for(var key in a)if(!deepEqual(a[key],b[key]))return!1}break;default:return!1}return!0},unescape:unescape,escape:function(value){return null==value?value:"string"!=typeof value?"":/^[a-z][a-z0-9_]*$/i.test(value)?value:"`".concat(value.replace(/`/g,"``"),"`")},escapeable:function(value){return null!=value&&"string"==typeof value&&!/^[a-z][a-z0-9_]*$/i.test(value)},valueError:valueError,concatenate:function concatenate(item){return null==item?"":"object"===_typeof(item)?item instanceof String||item instanceof Boolean||item instanceof Number?String(item.valueOf()):Array.isArray(item)?item.map((function(i){return concatenate(i)})).join(", "):item instanceof Date?isNaN(item)?null:item.toISOString():"[Collection]":String(item)},escapeHTML:function(value){var map={"&":"&amp;","<":"&lt;",">":"&gt;"};return String(value).replace(/[&<>]/g,(function(tag){return map[tag]||tag}))},isNumber:isNumber,pathToString:function(){return this.path.map((function(item,index){return"variable"===item.type?(0===index?"":".")+item.name:"property"!==item.type?"":0===item.length?"[]":1===item.length&&"number"===item[0].type?"[".concat(item[0].value,"]"):1===item.length&&"string"===item[0].type?'["'.concat(item[0].value.replace(/\"/g,'""'),'"]'):"[]"})).join("")},isDecimalNumber:function(number){return number-Math.floor(number)!=0},destructDecimalNumber:function(decimalNumberToDestruct){var arr,i,_decimalNumberToDestr2=(arr=decimalNumberToDestruct.toString().split("."),i=2,function(arr){if(Array.isArray(arr))return arr}(arr)||function(r,l){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var e,n,i,u,a=[],f=!0,o=!1;try{if(i=(t=t.call(r)).next,0===l){if(Object(t)!==t)return;f=!1}else for(;!(f=(e=i.call(t)).done)&&(a.push(e.value),a.length!==l);f=!0);}catch(r){o=!0,n=r}finally{try{if(!f&&null!=t.return&&(u=t.return(),Object(u)!==u))return}finally{if(o)throw n}}return a}}(arr,i)||function(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}(arr,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{integerNumber:_decimalNumberToDestr2[0],decimalNumber:_decimalNumberToDestr2[1]}},isObject:function(obj){return null===Object.getPrototypeOf(obj)||"[object Object]"===Object.prototype.toString.call(obj)},isPrimitive:isPrimitive,isStrictTypedArray:function(arr){return arr instanceof Int8Array||arr instanceof Int16Array||arr instanceof Int32Array||arr instanceof Uint8Array||arr instanceof Uint8ClampedArray||arr instanceof Uint16Array||arr instanceof Uint32Array||arr instanceof Float32Array||arr instanceof Float64Array||"undefined"!=typeof BigInt64Array&&arr instanceof BigInt64Array||"undefined"!=typeof BigUint64Array&&arr instanceof BigUint64Array},hasOwn:function(obj,name){return Object.prototype.hasOwnProperty.call(obj,name)}}},{"./bytes":3,"./errors.js":6,"./keywords.js":10}],14:[function(require,module,exports){"use strict";module.exports={timestamp:{type:"uinteger",group:"date",value:function(){return Math.floor(Date.now()/1e3)}},pi:{type:"number",group:"math",value:Math.PI},now:{type:"date",group:"date",value:function(){return new Date}},uuid:{type:"text",group:"string",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(c){var r=16*Math.random()|0;return("x"===c?r:3&r|8).toString(16)}))}},random:{type:"number",group:"math",value:function(){return Math.random()}}}},{}],15:[function(require,module,exports){"use strict";var moment=require("./../shims/moment-timezone.js"),IMTDate={timezone:"UTC",parse:function(value,timezone){var d,day,month,time,year;if(value instanceof Date)return value;if("number"==typeof value&&(value=String(value)),"string"!=typeof value)return null;if(value=value.trim(),timezone||(timezone=IMTDate.timezone),/^\d+$/.test(value))return new Date(parseInt(value));var hour=0,minute=0,second=0,fraction=0,offset=null,dd=function(val){var digs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"".concat("0".repeat(digs-String(val).length)).concat(val)};if(/^(\d{4})[\-\/](\d{1,2})[\-\/](\d{1,2})[T\s]?(.+)?$/i.exec(value)&&(year=parseInt(RegExp.$1),month=parseInt(RegExp.$2),day=parseInt(RegExp.$3),time=null!=RegExp.$4?RegExp.$4.trim():void 0,month>12&&(d=day,day=month,month=d)),/^(\d{1,2})[\.\-]\s?(\d{1,2})[\.\-]\s?(\d{4})\s*(.+)?$/i.exec(value)&&(year=parseInt(RegExp.$3),month=parseInt(RegExp.$2),day=parseInt(RegExp.$1),time=null!=RegExp.$4?RegExp.$4.trim():void 0,month>12&&(d=day,day=month,month=d)),/^(\d{1,2})\/(\d{1,2})\/(\d{4})\s*(.+)?$/i.exec(value)&&(year=parseInt(RegExp.$3),month=parseInt(RegExp.$1),day=parseInt(RegExp.$2),time=null!=RegExp.$4?RegExp.$4.trim():void 0,month>12&&(d=day,day=month,month=d)),time&&/^(.+)?([+\-])(\d\d):?(\d\d)$/i.exec(time)&&(offset=1e3*(60*parseInt(RegExp.$3)*60+60*parseInt(RegExp.$4)),"-"===RegExp.$2&&(offset*=-1),time=null!=RegExp.$1?RegExp.$1.trim():void 0),time&&/^(.+)?(Z|UTC|GMT)$/i.exec(time)&&(offset||(offset=0),time=null!=RegExp.$1?RegExp.$1.trim():void 0),time&&/^(\d{1,2}):(\d{1,2})(?:\:(\d{1,2})(?:\.(\d+))?)?$/i.exec(time))hour=parseInt(RegExp.$1),minute=parseInt(RegExp.$2),second=parseInt(RegExp.$3||0),fraction=parseInt((RegExp.$4||0).toString().substr(0,3));else if(time&&/^(\d{1,2})(?:\:(\d{1,2}))?\s*(AM|PM)$/i.exec(time)){hour=parseInt(RegExp.$1),minute=parseInt(RegExp.$2||0);var ampm=RegExp.$3.toLowerCase();"am"===ampm&&12===hour?hour=0:"pm"===ampm&&12!==hour&&(hour+=12)}else if(time)return null;if(year){var timestamp=Date.UTC(year,month-1,day,hour,minute,second,fraction);return isNaN(timestamp)?null:null!=offset?new Date(timestamp-offset):timezone&&"UTC"!==timezone?moment.tz("".concat(year,"-").concat(dd(month),"-").concat(dd(day),"T").concat(dd(hour),":").concat(dd(minute),":").concat(dd(second),".").concat(dd(fraction,3)),timezone).toDate():new Date(timestamp)}return null},parseTime:function(value,timezone){if(timezone||(timezone=IMTDate.timezone),value instanceof Date&&(value=moment(value).tz(timezone).format("HH:mm:ss.SSS")),"string"!=typeof value)return null;var hour=0,minute=0,second=0,fraction=0;if((value=value.trim())&&/^(\d{1,2}):(\d{1,2})(?:\:(\d{1,2})(?:\.(\d{1,3}))?)?$/i.exec(value))hour=parseInt(RegExp.$1),minute=parseInt(RegExp.$2),second=parseInt(RegExp.$3||0),fraction=parseInt(RegExp.$4||0);else{if(!/^(\d{1,2})(?:\:(\d{1,2}))?\s*(AM|PM)$/i.exec(value))return(value=IMTDate.parse(value,timezone))?IMTDate.parseTime(value,timezone):null;hour=parseInt(RegExp.$1),minute=parseInt(RegExp.$2||0);var ampm=RegExp.$3.toLowerCase();"am"===ampm&&12===hour?hour=0:"pm"===ampm&&12!==hour&&(hour+=12)}return hour>=24||minute>=60||second>=60||fraction>=1e3?null:fraction+1e3*second+60*minute*1e3+60*hour*60*1e3},timeToString:function(number){if("number"!=typeof number)return null;if(number>=864e5)return null;var dd=function(val){var digs=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"".concat("0".repeat(digs-String(val).length)).concat(val)},hour=Math.floor(number/36e5);number%=36e5;var minute=Math.floor(number/6e4);number%=6e4;var second=Math.floor(number/1e3),fraction=number%1e3,txt="".concat(dd(hour));return txt+=":".concat(dd(minute)),(second||fraction)&&(txt+=":".concat(dd(second))),fraction&&(txt+=".".concat(dd(fraction,3))),txt}};exports.IMTDate=IMTDate},{"./../shims/moment-timezone.js":16}],16:[function(require,module,exports){(function(global){"use strict";if(!global.moment)throw new Error("Moment is not installed.");module.exports=global.moment}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(require,module,exports){},{}],18:[function(require,module,exports){!function(globalScope){"use strict";var Decimal,inexact,noConflict,quadrant,EXP_LIMIT=9e15,NUMERALS="0123456789abcdef",LN10="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",PI="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",DEFAULTS={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-EXP_LIMIT,maxE:EXP_LIMIT,crypto:!1},external=!0,invalidArgument="[DecimalError] Invalid argument: ",mathfloor=Math.floor,mathpow=Math.pow,isBinary=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,isHex=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,isOctal=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,BASE=1e7,LN10_PRECISION=LN10.length-1,PI_PRECISION=PI.length-1,P={name:"[object Decimal]"};function digitsToString(d){var i,k,ws,indexOfLastWord=d.length-1,str="",w=d[0];if(indexOfLastWord>0){for(str+=w,i=1;i<indexOfLastWord;i++)(k=7-(ws=d[i]+"").length)&&(str+=getZeroString(k)),str+=ws;(k=7-(ws=(w=d[i])+"").length)&&(str+=getZeroString(k))}else if(0===w)return"0";for(;w%10==0;)w/=10;return str+w}function checkInt32(i,min,max){if(i!==~~i||i<min||i>max)throw Error(invalidArgument+i)}function checkRoundingDigits(d,i,rm,repeating){var di,k,r,rd;for(k=d[0];k>=10;k/=10)--i;return--i<0?(i+=7,di=0):(di=Math.ceil((i+1)/7),i%=7),k=mathpow(10,7-i),rd=d[di]%k|0,null==repeating?i<3?(0==i?rd=rd/100|0:1==i&&(rd=rd/10|0),r=rm<4&&99999==rd||rm>3&&49999==rd||5e4==rd||0==rd):r=(rm<4&&rd+1==k||rm>3&&rd+1==k/2)&&(d[di+1]/k/100|0)==mathpow(10,i-2)-1||(rd==k/2||0==rd)&&0==(d[di+1]/k/100|0):i<4?(0==i?rd=rd/1e3|0:1==i?rd=rd/100|0:2==i&&(rd=rd/10|0),r=(repeating||rm<4)&&9999==rd||!repeating&&rm>3&&4999==rd):r=((repeating||rm<4)&&rd+1==k||!repeating&&rm>3&&rd+1==k/2)&&(d[di+1]/k/1e3|0)==mathpow(10,i-3)-1,r}function convertBase(str,baseIn,baseOut){for(var j,arrL,arr=[0],i=0,strL=str.length;i<strL;){for(arrL=arr.length;arrL--;)arr[arrL]*=baseIn;for(arr[0]+=NUMERALS.indexOf(str.charAt(i++)),j=0;j<arr.length;j++)arr[j]>baseOut-1&&(void 0===arr[j+1]&&(arr[j+1]=0),arr[j+1]+=arr[j]/baseOut|0,arr[j]%=baseOut)}return arr.reverse()}P.absoluteValue=P.abs=function(){var x=new this.constructor(this);return x.s<0&&(x.s=1),finalise(x)},P.ceil=function(){return finalise(new this.constructor(this),this.e+1,2)},P.comparedTo=P.cmp=function(y){var i,j,xdL,ydL,x=this,xd=x.d,yd=(y=new x.constructor(y)).d,xs=x.s,ys=y.s;if(!xd||!yd)return xs&&ys?xs!==ys?xs:xd===yd?0:!xd^xs<0?1:-1:NaN;if(!xd[0]||!yd[0])return xd[0]?xs:yd[0]?-ys:0;if(xs!==ys)return xs;if(x.e!==y.e)return x.e>y.e^xs<0?1:-1;for(i=0,j=(xdL=xd.length)<(ydL=yd.length)?xdL:ydL;i<j;++i)if(xd[i]!==yd[i])return xd[i]>yd[i]^xs<0?1:-1;return xdL===ydL?0:xdL>ydL^xs<0?1:-1},P.cosine=P.cos=function(){var pr,rm,x=this,Ctor=x.constructor;return x.d?x.d[0]?(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+7,Ctor.rounding=1,x=function(Ctor,x){var k,y,len=x.d.length;len<32?y=(1/tinyPow(4,k=Math.ceil(len/3))).toString():(k=16,y="2.3283064365386962890625e-10"),Ctor.precision+=k,x=taylorSeries(Ctor,1,x.times(y),new Ctor(1));for(var i=k;i--;){var cos2x=x.times(x);x=cos2x.times(cos2x).minus(cos2x).times(8).plus(1)}return Ctor.precision-=k,x}(Ctor,toLessThanHalfPi(Ctor,x)),Ctor.precision=pr,Ctor.rounding=rm,finalise(2==quadrant||3==quadrant?x.neg():x,pr,rm,!0)):new Ctor(1):new Ctor(NaN)},P.cubeRoot=P.cbrt=function(){var e,m,n,r,rep,s,sd,t,t3,t3plusx,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);for(external=!1,(s=x.s*mathpow(x.s*x,1/3))&&Math.abs(s)!=1/0?r=new Ctor(s.toString()):(n=digitsToString(x.d),(s=((e=x.e)-n.length+1)%3)&&(n+=1==s||-2==s?"0":"00"),s=mathpow(n,1/3),e=mathfloor((e+1)/3)-(e%3==(e<0?-1:2)),(r=new Ctor(n=s==1/0?"5e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=x.s),sd=(e=Ctor.precision)+3;;)if(t3plusx=(t3=(t=r).times(t).times(t)).plus(x),r=divide(t3plusx.plus(x).times(t),t3plusx.plus(t3),sd+2,1),digitsToString(t.d).slice(0,sd)===(n=digitsToString(r.d)).slice(0,sd)){if("9999"!=(n=n.slice(sd-3,sd+1))&&(rep||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(finalise(r,e+1,1),m=!r.times(r).times(r).eq(x));break}if(!rep&&(finalise(t,e+1,0),t.times(t).times(t).eq(x))){r=t;break}sd+=4,rep=1}return external=!0,finalise(r,e,Ctor.rounding,m)},P.decimalPlaces=P.dp=function(){var w,d=this.d,n=NaN;if(d){if(n=7*((w=d.length-1)-mathfloor(this.e/7)),w=d[w])for(;w%10==0;w/=10)n--;n<0&&(n=0)}return n},P.dividedBy=P.div=function(y){return divide(this,new this.constructor(y))},P.dividedToIntegerBy=P.divToInt=function(y){var Ctor=this.constructor;return finalise(divide(this,new Ctor(y),0,1,1),Ctor.precision,Ctor.rounding)},P.equals=P.eq=function(y){return 0===this.cmp(y)},P.floor=function(){return finalise(new this.constructor(this),this.e+1,3)},P.greaterThan=P.gt=function(y){return this.cmp(y)>0},P.greaterThanOrEqualTo=P.gte=function(y){var k=this.cmp(y);return 1==k||0===k},P.hyperbolicCosine=P.cosh=function(){var k,n,pr,rm,len,x=this,Ctor=x.constructor,one=new Ctor(1);if(!x.isFinite())return new Ctor(x.s?1/0:NaN);if(x.isZero())return one;pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+4,Ctor.rounding=1,(len=x.d.length)<32?n=(1/tinyPow(4,k=Math.ceil(len/3))).toString():(k=16,n="2.3283064365386962890625e-10"),x=taylorSeries(Ctor,1,x.times(n),new Ctor(1),!0);for(var cosh2_x,i=k,d8=new Ctor(8);i--;)cosh2_x=x.times(x),x=one.minus(cosh2_x.times(d8.minus(cosh2_x.times(d8))));return finalise(x,Ctor.precision=pr,Ctor.rounding=rm,!0)},P.hyperbolicSine=P.sinh=function(){var k,pr,rm,len,x=this,Ctor=x.constructor;if(!x.isFinite()||x.isZero())return new Ctor(x);if(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+4,Ctor.rounding=1,(len=x.d.length)<3)x=taylorSeries(Ctor,2,x,x,!0);else{k=(k=1.4*Math.sqrt(len))>16?16:0|k,x=taylorSeries(Ctor,2,x=x.times(1/tinyPow(5,k)),x,!0);for(var sinh2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);k--;)sinh2_x=x.times(x),x=x.times(d5.plus(sinh2_x.times(d16.times(sinh2_x).plus(d20))))}return Ctor.precision=pr,Ctor.rounding=rm,finalise(x,pr,rm,!0)},P.hyperbolicTangent=P.tanh=function(){var pr,rm,x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+7,Ctor.rounding=1,divide(x.sinh(),x.cosh(),Ctor.precision=pr,Ctor.rounding=rm)):new Ctor(x.s)},P.inverseCosine=P.acos=function(){var halfPi,x=this,Ctor=x.constructor,k=x.abs().cmp(1),pr=Ctor.precision,rm=Ctor.rounding;return-1!==k?0===k?x.isNeg()?getPi(Ctor,pr,rm):new Ctor(0):new Ctor(NaN):x.isZero()?getPi(Ctor,pr+4,rm).times(.5):(Ctor.precision=pr+6,Ctor.rounding=1,x=x.asin(),halfPi=getPi(Ctor,pr+4,rm).times(.5),Ctor.precision=pr,Ctor.rounding=rm,halfPi.minus(x))},P.inverseHyperbolicCosine=P.acosh=function(){var pr,rm,x=this,Ctor=x.constructor;return x.lte(1)?new Ctor(x.eq(1)?0:NaN):x.isFinite()?(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(Math.abs(x.e),x.sd())+4,Ctor.rounding=1,external=!1,x=x.times(x).minus(1).sqrt().plus(x),external=!0,Ctor.precision=pr,Ctor.rounding=rm,x.ln()):new Ctor(x)},P.inverseHyperbolicSine=P.asinh=function(){var pr,rm,x=this,Ctor=x.constructor;return!x.isFinite()||x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+2*Math.max(Math.abs(x.e),x.sd())+6,Ctor.rounding=1,external=!1,x=x.times(x).plus(1).sqrt().plus(x),external=!0,Ctor.precision=pr,Ctor.rounding=rm,x.ln())},P.inverseHyperbolicTangent=P.atanh=function(){var pr,rm,wpr,xsd,x=this,Ctor=x.constructor;return x.isFinite()?x.e>=0?new Ctor(x.abs().eq(1)?x.s/0:x.isZero()?x:NaN):(pr=Ctor.precision,rm=Ctor.rounding,xsd=x.sd(),Math.max(xsd,pr)<2*-x.e-1?finalise(new Ctor(x),pr,rm,!0):(Ctor.precision=wpr=xsd-x.e,x=divide(x.plus(1),new Ctor(1).minus(x),wpr+pr,1),Ctor.precision=pr+4,Ctor.rounding=1,x=x.ln(),Ctor.precision=pr,Ctor.rounding=rm,x.times(.5))):new Ctor(NaN)},P.inverseSine=P.asin=function(){var halfPi,k,pr,rm,x=this,Ctor=x.constructor;return x.isZero()?new Ctor(x):(k=x.abs().cmp(1),pr=Ctor.precision,rm=Ctor.rounding,-1!==k?0===k?((halfPi=getPi(Ctor,pr+4,rm).times(.5)).s=x.s,halfPi):new Ctor(NaN):(Ctor.precision=pr+6,Ctor.rounding=1,x=x.div(new Ctor(1).minus(x.times(x)).sqrt().plus(1)).atan(),Ctor.precision=pr,Ctor.rounding=rm,x.times(2)))},P.inverseTangent=P.atan=function(){var i,j,k,n,px,t,r,wpr,x2,x=this,Ctor=x.constructor,pr=Ctor.precision,rm=Ctor.rounding;if(x.isFinite()){if(x.isZero())return new Ctor(x);if(x.abs().eq(1)&&pr+4<=PI_PRECISION)return(r=getPi(Ctor,pr+4,rm).times(.25)).s=x.s,r}else{if(!x.s)return new Ctor(NaN);if(pr+4<=PI_PRECISION)return(r=getPi(Ctor,pr+4,rm).times(.5)).s=x.s,r}for(Ctor.precision=wpr=pr+10,Ctor.rounding=1,i=k=Math.min(28,wpr/7+2|0);i;--i)x=x.div(x.times(x).plus(1).sqrt().plus(1));for(external=!1,j=Math.ceil(wpr/7),n=1,x2=x.times(x),r=new Ctor(x),px=x;-1!==i;)if(px=px.times(x2),t=r.minus(px.div(n+=2)),px=px.times(x2),void 0!==(r=t.plus(px.div(n+=2))).d[j])for(i=j;r.d[i]===t.d[i]&&i--;);return k&&(r=r.times(2<<k-1)),external=!0,finalise(r,Ctor.precision=pr,Ctor.rounding=rm,!0)},P.isFinite=function(){return!!this.d},P.isInteger=P.isInt=function(){return!!this.d&&mathfloor(this.e/7)>this.d.length-2},P.isNaN=function(){return!this.s},P.isNegative=P.isNeg=function(){return this.s<0},P.isPositive=P.isPos=function(){return this.s>0},P.isZero=function(){return!!this.d&&0===this.d[0]},P.lessThan=P.lt=function(y){return this.cmp(y)<0},P.lessThanOrEqualTo=P.lte=function(y){return this.cmp(y)<1},P.logarithm=P.log=function(base){var isBase10,d,denominator,k,inf,num,sd,r,Ctor=this.constructor,pr=Ctor.precision,rm=Ctor.rounding;if(null==base)base=new Ctor(10),isBase10=!0;else{if(d=(base=new Ctor(base)).d,base.s<0||!d||!d[0]||base.eq(1))return new Ctor(NaN);isBase10=base.eq(10)}if(d=this.d,this.s<0||!d||!d[0]||this.eq(1))return new Ctor(d&&!d[0]?-1/0:1!=this.s?NaN:d?0:1/0);if(isBase10)if(d.length>1)inf=!0;else{for(k=d[0];k%10==0;)k/=10;inf=1!==k}if(external=!1,num=naturalLogarithm(this,sd=pr+5),denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd),checkRoundingDigits((r=divide(num,denominator,sd,1)).d,k=pr,rm))do{if(num=naturalLogarithm(this,sd+=10),denominator=isBase10?getLn10(Ctor,sd+10):naturalLogarithm(base,sd),r=divide(num,denominator,sd,1),!inf){+digitsToString(r.d).slice(k+1,k+15)+1==1e14&&(r=finalise(r,pr+1,0));break}}while(checkRoundingDigits(r.d,k+=10,rm));return external=!0,finalise(r,pr,rm)},P.minus=P.sub=function(y){var d,e,i,j,k,len,pr,rm,xd,xe,xLTy,yd,x=this,Ctor=x.constructor;if(y=new Ctor(y),!x.d||!y.d)return x.s&&y.s?x.d?y.s=-y.s:y=new Ctor(y.d||x.s!==y.s?x:NaN):y=new Ctor(NaN),y;if(x.s!=y.s)return y.s=-y.s,x.plus(y);if(xd=x.d,yd=y.d,pr=Ctor.precision,rm=Ctor.rounding,!xd[0]||!yd[0]){if(yd[0])y.s=-y.s;else{if(!xd[0])return new Ctor(3===rm?-0:0);y=new Ctor(x)}return external?finalise(y,pr,rm):y}if(e=mathfloor(y.e/7),xe=mathfloor(x.e/7),xd=xd.slice(),k=xe-e){for((xLTy=k<0)?(d=xd,k=-k,len=yd.length):(d=yd,e=xe,len=xd.length),k>(i=Math.max(Math.ceil(pr/7),len)+2)&&(k=i,d.length=1),d.reverse(),i=k;i--;)d.push(0);d.reverse()}else{for((xLTy=(i=xd.length)<(len=yd.length))&&(len=i),i=0;i<len;i++)if(xd[i]!=yd[i]){xLTy=xd[i]<yd[i];break}k=0}for(xLTy&&(d=xd,xd=yd,yd=d,y.s=-y.s),len=xd.length,i=yd.length-len;i>0;--i)xd[len++]=0;for(i=yd.length;i>k;){if(xd[--i]<yd[i]){for(j=i;j&&0===xd[--j];)xd[j]=BASE-1;--xd[j],xd[i]+=BASE}xd[i]-=yd[i]}for(;0===xd[--len];)xd.pop();for(;0===xd[0];xd.shift())--e;return xd[0]?(y.d=xd,y.e=getBase10Exponent(xd,e),external?finalise(y,pr,rm):y):new Ctor(3===rm?-0:0)},P.modulo=P.mod=function(y){var q,x=this,Ctor=x.constructor;return y=new Ctor(y),!x.d||!y.s||y.d&&!y.d[0]?new Ctor(NaN):!y.d||x.d&&!x.d[0]?finalise(new Ctor(x),Ctor.precision,Ctor.rounding):(external=!1,9==Ctor.modulo?(q=divide(x,y.abs(),0,3,1)).s*=y.s:q=divide(x,y,0,Ctor.modulo,1),q=q.times(y),external=!0,x.minus(q))},P.naturalExponential=P.exp=function(){return naturalExponential(this)},P.naturalLogarithm=P.ln=function(){return naturalLogarithm(this)},P.negated=P.neg=function(){var x=new this.constructor(this);return x.s=-x.s,finalise(x)},P.plus=P.add=function(y){var carry,d,e,i,k,len,pr,rm,xd,yd,x=this,Ctor=x.constructor;if(y=new Ctor(y),!x.d||!y.d)return x.s&&y.s?x.d||(y=new Ctor(y.d||x.s===y.s?x:NaN)):y=new Ctor(NaN),y;if(x.s!=y.s)return y.s=-y.s,x.minus(y);if(xd=x.d,yd=y.d,pr=Ctor.precision,rm=Ctor.rounding,!xd[0]||!yd[0])return yd[0]||(y=new Ctor(x)),external?finalise(y,pr,rm):y;if(k=mathfloor(x.e/7),e=mathfloor(y.e/7),xd=xd.slice(),i=k-e){for(i<0?(d=xd,i=-i,len=yd.length):(d=yd,e=k,len=xd.length),i>(len=(k=Math.ceil(pr/7))>len?k+1:len+1)&&(i=len,d.length=1),d.reverse();i--;)d.push(0);d.reverse()}for((len=xd.length)-(i=yd.length)<0&&(i=len,d=yd,yd=xd,xd=d),carry=0;i;)carry=(xd[--i]=xd[i]+yd[i]+carry)/BASE|0,xd[i]%=BASE;for(carry&&(xd.unshift(carry),++e),len=xd.length;0==xd[--len];)xd.pop();return y.d=xd,y.e=getBase10Exponent(xd,e),external?finalise(y,pr,rm):y},P.precision=P.sd=function(z){var k,x=this;if(void 0!==z&&z!==!!z&&1!==z&&0!==z)throw Error(invalidArgument+z);return x.d?(k=getPrecision(x.d),z&&x.e+1>k&&(k=x.e+1)):k=NaN,k},P.round=function(){var x=this,Ctor=x.constructor;return finalise(new Ctor(x),x.e+1,Ctor.rounding)},P.sine=P.sin=function(){var pr,rm,x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+Math.max(x.e,x.sd())+7,Ctor.rounding=1,x=function(Ctor,x){var k,len=x.d.length;if(len<3)return taylorSeries(Ctor,2,x,x);k=(k=1.4*Math.sqrt(len))>16?16:0|k,x=taylorSeries(Ctor,2,x=x.times(1/tinyPow(5,k)),x);for(var sin2_x,d5=new Ctor(5),d16=new Ctor(16),d20=new Ctor(20);k--;)sin2_x=x.times(x),x=x.times(d5.plus(sin2_x.times(d16.times(sin2_x).minus(d20))));return x}(Ctor,toLessThanHalfPi(Ctor,x)),Ctor.precision=pr,Ctor.rounding=rm,finalise(quadrant>2?x.neg():x,pr,rm,!0)):new Ctor(NaN)},P.squareRoot=P.sqrt=function(){var m,n,sd,r,rep,t,x=this,d=x.d,e=x.e,s=x.s,Ctor=x.constructor;if(1!==s||!d||!d[0])return new Ctor(!s||s<0&&(!d||d[0])?NaN:d?x:1/0);for(external=!1,0==(s=Math.sqrt(+x))||s==1/0?(((n=digitsToString(d)).length+e)%2==0&&(n+="0"),s=Math.sqrt(n),e=mathfloor((e+1)/2)-(e<0||e%2),r=new Ctor(n=s==1/0?"1e"+e:(n=s.toExponential()).slice(0,n.indexOf("e")+1)+e)):r=new Ctor(s.toString()),sd=(e=Ctor.precision)+3;;)if(r=(t=r).plus(divide(x,t,sd+2,1)).times(.5),digitsToString(t.d).slice(0,sd)===(n=digitsToString(r.d)).slice(0,sd)){if("9999"!=(n=n.slice(sd-3,sd+1))&&(rep||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(finalise(r,e+1,1),m=!r.times(r).eq(x));break}if(!rep&&(finalise(t,e+1,0),t.times(t).eq(x))){r=t;break}sd+=4,rep=1}return external=!0,finalise(r,e,Ctor.rounding,m)},P.tangent=P.tan=function(){var pr,rm,x=this,Ctor=x.constructor;return x.isFinite()?x.isZero()?new Ctor(x):(pr=Ctor.precision,rm=Ctor.rounding,Ctor.precision=pr+10,Ctor.rounding=1,(x=x.sin()).s=1,x=divide(x,new Ctor(1).minus(x.times(x)).sqrt(),pr+10,0),Ctor.precision=pr,Ctor.rounding=rm,finalise(2==quadrant||4==quadrant?x.neg():x,pr,rm,!0)):new Ctor(NaN)},P.times=P.mul=function(y){var carry,e,i,k,r,rL,t,xdL,ydL,x=this,Ctor=x.constructor,xd=x.d,yd=(y=new Ctor(y)).d;if(y.s*=x.s,!(xd&&xd[0]&&yd&&yd[0]))return new Ctor(!y.s||xd&&!xd[0]&&!yd||yd&&!yd[0]&&!xd?NaN:xd&&yd?0*y.s:y.s/0);for(e=mathfloor(x.e/7)+mathfloor(y.e/7),(xdL=xd.length)<(ydL=yd.length)&&(r=xd,xd=yd,yd=r,rL=xdL,xdL=ydL,ydL=rL),r=[],i=rL=xdL+ydL;i--;)r.push(0);for(i=ydL;--i>=0;){for(carry=0,k=xdL+i;k>i;)t=r[k]+yd[i]*xd[k-i-1]+carry,r[k--]=t%BASE|0,carry=t/BASE|0;r[k]=(r[k]+carry)%BASE|0}for(;!r[--rL];)r.pop();return carry?++e:r.shift(),y.d=r,y.e=getBase10Exponent(r,e),external?finalise(y,Ctor.precision,Ctor.rounding):y},P.toBinary=function(sd,rm){return toStringBinary(this,2,sd,rm)},P.toDecimalPlaces=P.toDP=function(dp,rm){var x=this,Ctor=x.constructor;return x=new Ctor(x),void 0===dp?x:(checkInt32(dp,0,1e9),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),finalise(x,dp+x.e+1,rm))},P.toExponential=function(dp,rm){var str,x=this,Ctor=x.constructor;return void 0===dp?str=finiteToString(x,!0):(checkInt32(dp,0,1e9),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),str=finiteToString(x=finalise(new Ctor(x),dp+1,rm),!0,dp+1)),x.isNeg()&&!x.isZero()?"-"+str:str},P.toFixed=function(dp,rm){var str,y,x=this,Ctor=x.constructor;return void 0===dp?str=finiteToString(x):(checkInt32(dp,0,1e9),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),str=finiteToString(y=finalise(new Ctor(x),dp+x.e+1,rm),!1,dp+y.e+1)),x.isNeg()&&!x.isZero()?"-"+str:str},P.toFraction=function(maxD){var d,d0,d1,d2,e,k,n,n0,n1,pr,q,r,x=this,xd=x.d,Ctor=x.constructor;if(!xd)return new Ctor(x);if(n1=d0=new Ctor(1),d1=n0=new Ctor(0),k=(e=(d=new Ctor(d1)).e=getPrecision(xd)-x.e-1)%7,d.d[0]=mathpow(10,k<0?7+k:k),null==maxD)maxD=e>0?d:n1;else{if(!(n=new Ctor(maxD)).isInt()||n.lt(n1))throw Error(invalidArgument+n);maxD=n.gt(d)?e>0?d:n1:n}for(external=!1,n=new Ctor(digitsToString(xd)),pr=Ctor.precision,Ctor.precision=e=7*xd.length*2;q=divide(n,d,0,1,1),1!=(d2=d0.plus(q.times(d1))).cmp(maxD);)d0=d1,d1=d2,d2=n1,n1=n0.plus(q.times(d2)),n0=d2,d2=d,d=n.minus(q.times(d2)),n=d2;return d2=divide(maxD.minus(d0),d1,0,1,1),n0=n0.plus(d2.times(n1)),d0=d0.plus(d2.times(d1)),n0.s=n1.s=x.s,r=divide(n1,d1,e,1).minus(x).abs().cmp(divide(n0,d0,e,1).minus(x).abs())<1?[n1,d1]:[n0,d0],Ctor.precision=pr,external=!0,r},P.toHexadecimal=P.toHex=function(sd,rm){return toStringBinary(this,16,sd,rm)},P.toNearest=function(y,rm){var x=this,Ctor=x.constructor;if(x=new Ctor(x),null==y){if(!x.d)return x;y=new Ctor(1),rm=Ctor.rounding}else{if(y=new Ctor(y),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),!x.d)return y.s?x:y;if(!y.d)return y.s&&(y.s=x.s),y}return y.d[0]?(external=!1,x=divide(x,y,0,rm,1).times(y),external=!0,finalise(x)):(y.s=x.s,x=y),x},P.toNumber=function(){return+this},P.toOctal=function(sd,rm){return toStringBinary(this,8,sd,rm)},P.toPower=P.pow=function(y){var e,k,pr,r,rm,s,x=this,Ctor=x.constructor,yn=+(y=new Ctor(y));if(!(x.d&&y.d&&x.d[0]&&y.d[0]))return new Ctor(mathpow(+x,yn));if((x=new Ctor(x)).eq(1))return x;if(pr=Ctor.precision,rm=Ctor.rounding,y.eq(1))return finalise(x,pr,rm);if((e=mathfloor(y.e/7))>=y.d.length-1&&(k=yn<0?-yn:yn)<=9007199254740991)return r=intPow(Ctor,x,k,pr),y.s<0?new Ctor(1).div(r):finalise(r,pr,rm);if((s=x.s)<0){if(e<y.d.length-1)return new Ctor(NaN);if(0==(1&y.d[e])&&(s=1),0==x.e&&1==x.d[0]&&1==x.d.length)return x.s=s,x}return(e=0!=(k=mathpow(+x,yn))&&isFinite(k)?new Ctor(k+"").e:mathfloor(yn*(Math.log("0."+digitsToString(x.d))/Math.LN10+x.e+1)))>Ctor.maxE+1||e<Ctor.minE-1?new Ctor(e>0?s/0:0):(external=!1,Ctor.rounding=x.s=1,k=Math.min(12,(e+"").length),(r=naturalExponential(y.times(naturalLogarithm(x,pr+k)),pr)).d&&checkRoundingDigits((r=finalise(r,pr+5,1)).d,pr,rm)&&(e=pr+10,+digitsToString((r=finalise(naturalExponential(y.times(naturalLogarithm(x,e+k)),e),e+5,1)).d).slice(pr+1,pr+15)+1==1e14&&(r=finalise(r,pr+1,0))),r.s=s,external=!0,Ctor.rounding=rm,finalise(r,pr,rm))},P.toPrecision=function(sd,rm){var str,x=this,Ctor=x.constructor;return void 0===sd?str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos):(checkInt32(sd,1,1e9),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8),str=finiteToString(x=finalise(new Ctor(x),sd,rm),sd<=x.e||x.e<=Ctor.toExpNeg,sd)),x.isNeg()&&!x.isZero()?"-"+str:str},P.toSignificantDigits=P.toSD=function(sd,rm){var Ctor=this.constructor;return void 0===sd?(sd=Ctor.precision,rm=Ctor.rounding):(checkInt32(sd,1,1e9),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8)),finalise(new Ctor(this),sd,rm)},P.toString=function(){var x=this,Ctor=x.constructor,str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos);return x.isNeg()&&!x.isZero()?"-"+str:str},P.truncated=P.trunc=function(){return finalise(new this.constructor(this),this.e+1,1)},P.valueOf=P.toJSON=function(){var x=this,Ctor=x.constructor,str=finiteToString(x,x.e<=Ctor.toExpNeg||x.e>=Ctor.toExpPos);return x.isNeg()?"-"+str:str};var divide=function(){function multiplyInteger(x,k,base){var temp,carry=0,i=x.length;for(x=x.slice();i--;)temp=x[i]*k+carry,x[i]=temp%base|0,carry=temp/base|0;return carry&&x.unshift(carry),x}function compare(a,b,aL,bL){var i,r;if(aL!=bL)r=aL>bL?1:-1;else for(i=r=0;i<aL;i++)if(a[i]!=b[i]){r=a[i]>b[i]?1:-1;break}return r}function subtract(a,b,aL,base){for(var i=0;aL--;)a[aL]-=i,i=a[aL]<b[aL]?1:0,a[aL]=i*base+a[aL]-b[aL];for(;!a[0]&&a.length>1;)a.shift()}return function(x,y,pr,rm,dp,base){var cmp,e,i,k,logBase,more,prod,prodL,q,qd,rem,remL,rem0,sd,t,xi,xL,yd0,yL,yz,Ctor=x.constructor,sign=x.s==y.s?1:-1,xd=x.d,yd=y.d;if(!(xd&&xd[0]&&yd&&yd[0]))return new Ctor(x.s&&y.s&&(xd?!yd||xd[0]!=yd[0]:yd)?xd&&0==xd[0]||!yd?0*sign:sign/0:NaN);for(base?(logBase=1,e=x.e-y.e):(base=BASE,logBase=7,e=mathfloor(x.e/logBase)-mathfloor(y.e/logBase)),yL=yd.length,xL=xd.length,qd=(q=new Ctor(sign)).d=[],i=0;yd[i]==(xd[i]||0);i++);if(yd[i]>(xd[i]||0)&&e--,null==pr?(sd=pr=Ctor.precision,rm=Ctor.rounding):sd=dp?pr+(x.e-y.e)+1:pr,sd<0)qd.push(1),more=!0;else{if(sd=sd/logBase+2|0,i=0,1==yL){for(k=0,yd=yd[0],sd++;(i<xL||k)&&sd--;i++)t=k*base+(xd[i]||0),qd[i]=t/yd|0,k=t%yd|0;more=k||i<xL}else{for((k=base/(yd[0]+1)|0)>1&&(yd=multiplyInteger(yd,k,base),xd=multiplyInteger(xd,k,base),yL=yd.length,xL=xd.length),xi=yL,remL=(rem=xd.slice(0,yL)).length;remL<yL;)rem[remL++]=0;(yz=yd.slice()).unshift(0),yd0=yd[0],yd[1]>=base/2&&++yd0;do{k=0,(cmp=compare(yd,rem,yL,remL))<0?(rem0=rem[0],yL!=remL&&(rem0=rem0*base+(rem[1]||0)),(k=rem0/yd0|0)>1?(k>=base&&(k=base-1),1==(cmp=compare(prod=multiplyInteger(yd,k,base),rem,prodL=prod.length,remL=rem.length))&&(k--,subtract(prod,yL<prodL?yz:yd,prodL,base))):(0==k&&(cmp=k=1),prod=yd.slice()),(prodL=prod.length)<remL&&prod.unshift(0),subtract(rem,prod,remL,base),-1==cmp&&(cmp=compare(yd,rem,yL,remL=rem.length))<1&&(k++,subtract(rem,yL<remL?yz:yd,remL,base)),remL=rem.length):0===cmp&&(k++,rem=[0]),qd[i++]=k,cmp&&rem[0]?rem[remL++]=xd[xi]||0:(rem=[xd[xi]],remL=1)}while((xi++<xL||void 0!==rem[0])&&sd--);more=void 0!==rem[0]}qd[0]||qd.shift()}if(1==logBase)q.e=e,inexact=more;else{for(i=1,k=qd[0];k>=10;k/=10)i++;q.e=i+e*logBase-1,finalise(q,dp?pr+q.e+1:pr,rm,more)}return q}}();function finalise(x,sd,rm,isTruncated){var digits,i,j,k,rd,roundUp,w,xd,xdi,Ctor=x.constructor;out:if(null!=sd){if(!(xd=x.d))return x;for(digits=1,k=xd[0];k>=10;k/=10)digits++;if((i=sd-digits)<0)i+=7,j=sd,rd=(w=xd[xdi=0])/mathpow(10,digits-j-1)%10|0;else if((xdi=Math.ceil((i+1)/7))>=(k=xd.length)){if(!isTruncated)break out;for(;k++<=xdi;)xd.push(0);w=rd=0,digits=1,j=(i%=7)-7+1}else{for(w=k=xd[xdi],digits=1;k>=10;k/=10)digits++;rd=(j=(i%=7)-7+digits)<0?0:w/mathpow(10,digits-j-1)%10|0}if(isTruncated=isTruncated||sd<0||void 0!==xd[xdi+1]||(j<0?w:w%mathpow(10,digits-j-1)),roundUp=rm<4?(rd||isTruncated)&&(0==rm||rm==(x.s<0?3:2)):rd>5||5==rd&&(4==rm||isTruncated||6==rm&&(i>0?j>0?w/mathpow(10,digits-j):0:xd[xdi-1])%10&1||rm==(x.s<0?8:7)),sd<1||!xd[0])return xd.length=0,roundUp?(sd-=x.e+1,xd[0]=mathpow(10,(7-sd%7)%7),x.e=-sd||0):xd[0]=x.e=0,x;if(0==i?(xd.length=xdi,k=1,xdi--):(xd.length=xdi+1,k=mathpow(10,7-i),xd[xdi]=j>0?(w/mathpow(10,digits-j)%mathpow(10,j)|0)*k:0),roundUp)for(;;){if(0==xdi){for(i=1,j=xd[0];j>=10;j/=10)i++;for(j=xd[0]+=k,k=1;j>=10;j/=10)k++;i!=k&&(x.e++,xd[0]==BASE&&(xd[0]=1));break}if(xd[xdi]+=k,xd[xdi]!=BASE)break;xd[xdi--]=0,k=1}for(i=xd.length;0===xd[--i];)xd.pop()}return external&&(x.e>Ctor.maxE?(x.d=null,x.e=NaN):x.e<Ctor.minE&&(x.e=0,x.d=[0])),x}function finiteToString(x,isExp,sd){if(!x.isFinite())return nonFiniteToString(x);var k,e=x.e,str=digitsToString(x.d),len=str.length;return isExp?(sd&&(k=sd-len)>0?str=str.charAt(0)+"."+str.slice(1)+getZeroString(k):len>1&&(str=str.charAt(0)+"."+str.slice(1)),str=str+(x.e<0?"e":"e+")+x.e):e<0?(str="0."+getZeroString(-e-1)+str,sd&&(k=sd-len)>0&&(str+=getZeroString(k))):e>=len?(str+=getZeroString(e+1-len),sd&&(k=sd-e-1)>0&&(str=str+"."+getZeroString(k))):((k=e+1)<len&&(str=str.slice(0,k)+"."+str.slice(k)),sd&&(k=sd-len)>0&&(e+1===len&&(str+="."),str+=getZeroString(k))),str}function getBase10Exponent(digits,e){var w=digits[0];for(e*=7;w>=10;w/=10)e++;return e}function getLn10(Ctor,sd,pr){if(sd>LN10_PRECISION)throw external=!0,pr&&(Ctor.precision=pr),Error("[DecimalError] Precision limit exceeded");return finalise(new Ctor(LN10),sd,1,!0)}function getPi(Ctor,sd,rm){if(sd>PI_PRECISION)throw Error("[DecimalError] Precision limit exceeded");return finalise(new Ctor(PI),sd,rm,!0)}function getPrecision(digits){var w=digits.length-1,len=7*w+1;if(w=digits[w]){for(;w%10==0;w/=10)len--;for(w=digits[0];w>=10;w/=10)len++}return len}function getZeroString(k){for(var zs="";k--;)zs+="0";return zs}function intPow(Ctor,x,n,pr){var isTruncated,r=new Ctor(1),k=Math.ceil(pr/7+4);for(external=!1;;){if(n%2&&truncate((r=r.times(x)).d,k)&&(isTruncated=!0),0===(n=mathfloor(n/2))){n=r.d.length-1,isTruncated&&0===r.d[n]&&++r.d[n];break}truncate((x=x.times(x)).d,k)}return external=!0,r}function isOdd(n){return 1&n.d[n.d.length-1]}function maxOrMin(Ctor,args,ltgt){for(var y,x=new Ctor(args[0]),i=0;++i<args.length;){if(!(y=new Ctor(args[i])).s){x=y;break}x[ltgt](y)&&(x=y)}return x}function naturalExponential(x,sd){var denominator,guard,j,pow,sum,t,wpr,rep=0,i=0,k=0,Ctor=x.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(!x.d||!x.d[0]||x.e>17)return new Ctor(x.d?x.d[0]?x.s<0?0:1/0:1:x.s?x.s<0?0:x:NaN);for(null==sd?(external=!1,wpr=pr):wpr=sd,t=new Ctor(.03125);x.e>-2;)x=x.times(t),k+=5;for(wpr+=guard=Math.log(mathpow(2,k))/Math.LN10*2+5|0,denominator=pow=sum=new Ctor(1),Ctor.precision=wpr;;){if(pow=finalise(pow.times(x),wpr,1),denominator=denominator.times(++i),digitsToString((t=sum.plus(divide(pow,denominator,wpr,1))).d).slice(0,wpr)===digitsToString(sum.d).slice(0,wpr)){for(j=k;j--;)sum=finalise(sum.times(sum),wpr,1);if(null!=sd)return Ctor.precision=pr,sum;if(!(rep<3&&checkRoundingDigits(sum.d,wpr-guard,rm,rep)))return finalise(sum,Ctor.precision=pr,rm,external=!0);Ctor.precision=wpr+=10,denominator=pow=t=new Ctor(1),i=0,rep++}sum=t}}function naturalLogarithm(y,sd){var c,c0,denominator,e,numerator,rep,sum,t,wpr,x1,x2,n=1,x=y,xd=x.d,Ctor=x.constructor,rm=Ctor.rounding,pr=Ctor.precision;if(x.s<0||!xd||!xd[0]||!x.e&&1==xd[0]&&1==xd.length)return new Ctor(xd&&!xd[0]?-1/0:1!=x.s?NaN:xd?0:x);if(null==sd?(external=!1,wpr=pr):wpr=sd,Ctor.precision=wpr+=10,c0=(c=digitsToString(xd)).charAt(0),!(Math.abs(e=x.e)<15e14))return t=getLn10(Ctor,wpr+2,pr).times(e+""),x=naturalLogarithm(new Ctor(c0+"."+c.slice(1)),wpr-10).plus(t),Ctor.precision=pr,null==sd?finalise(x,pr,rm,external=!0):x;for(;c0<7&&1!=c0||1==c0&&c.charAt(1)>3;)c0=(c=digitsToString((x=x.times(y)).d)).charAt(0),n++;for(e=x.e,c0>1?(x=new Ctor("0."+c),e++):x=new Ctor(c0+"."+c.slice(1)),x1=x,sum=numerator=x=divide(x.minus(1),x.plus(1),wpr,1),x2=finalise(x.times(x),wpr,1),denominator=3;;){if(numerator=finalise(numerator.times(x2),wpr,1),digitsToString((t=sum.plus(divide(numerator,new Ctor(denominator),wpr,1))).d).slice(0,wpr)===digitsToString(sum.d).slice(0,wpr)){if(sum=sum.times(2),0!==e&&(sum=sum.plus(getLn10(Ctor,wpr+2,pr).times(e+""))),sum=divide(sum,new Ctor(n),wpr,1),null!=sd)return Ctor.precision=pr,sum;if(!checkRoundingDigits(sum.d,wpr-10,rm,rep))return finalise(sum,Ctor.precision=pr,rm,external=!0);Ctor.precision=wpr+=10,t=numerator=x=divide(x1.minus(1),x1.plus(1),wpr,1),x2=finalise(x.times(x),wpr,1),denominator=rep=1}sum=t,denominator+=2}}function nonFiniteToString(x){return String(x.s*x.s/0)}function parseDecimal(x,str){var e,i,len;for((e=str.indexOf("."))>-1&&(str=str.replace(".","")),(i=str.search(/e/i))>0?(e<0&&(e=i),e+=+str.slice(i+1),str=str.substring(0,i)):e<0&&(e=str.length),i=0;48===str.charCodeAt(i);i++);for(len=str.length;48===str.charCodeAt(len-1);--len);if(str=str.slice(i,len)){if(len-=i,x.e=e=e-i-1,x.d=[],i=(e+1)%7,e<0&&(i+=7),i<len){for(i&&x.d.push(+str.slice(0,i)),len-=7;i<len;)x.d.push(+str.slice(i,i+=7));i=7-(str=str.slice(i)).length}else i-=len;for(;i--;)str+="0";x.d.push(+str),external&&(x.e>x.constructor.maxE?(x.d=null,x.e=NaN):x.e<x.constructor.minE&&(x.e=0,x.d=[0]))}else x.e=0,x.d=[0];return x}function parseOther(x,str){var base,Ctor,divisor,i,isFloat,len,p,xd,xe;if("Infinity"===str||"NaN"===str)return+str||(x.s=NaN),x.e=NaN,x.d=null,x;if(isHex.test(str))base=16,str=str.toLowerCase();else if(isBinary.test(str))base=2;else{if(!isOctal.test(str))throw Error(invalidArgument+str);base=8}for((i=str.search(/p/i))>0?(p=+str.slice(i+1),str=str.substring(2,i)):str=str.slice(2),isFloat=(i=str.indexOf("."))>=0,Ctor=x.constructor,isFloat&&(i=(len=(str=str.replace(".","")).length)-i,divisor=intPow(Ctor,new Ctor(base),i,2*i)),i=xe=(xd=convertBase(str,base,BASE)).length-1;0===xd[i];--i)xd.pop();return i<0?new Ctor(0*x.s):(x.e=getBase10Exponent(xd,xe),x.d=xd,external=!1,isFloat&&(x=divide(x,divisor,4*len)),p&&(x=x.times(Math.abs(p)<54?mathpow(2,p):Decimal.pow(2,p))),external=!0,x)}function taylorSeries(Ctor,n,x,y,isHyperbolic){var j,t,u,x2,pr=Ctor.precision,k=Math.ceil(pr/7);for(external=!1,x2=x.times(x),u=new Ctor(y);;){if(t=divide(u.times(x2),new Ctor(n++*n++),pr,1),u=isHyperbolic?y.plus(t):y.minus(t),y=divide(t.times(x2),new Ctor(n++*n++),pr,1),void 0!==(t=u.plus(y)).d[k]){for(j=k;t.d[j]===u.d[j]&&j--;);if(-1==j)break}j=u,u=y,y=t,t=j}return external=!0,t.d.length=k+1,t}function tinyPow(b,e){for(var n=b;--e;)n*=b;return n}function toLessThanHalfPi(Ctor,x){var t,isNeg=x.s<0,pi=getPi(Ctor,Ctor.precision,1),halfPi=pi.times(.5);if((x=x.abs()).lte(halfPi))return quadrant=isNeg?4:1,x;if((t=x.divToInt(pi)).isZero())quadrant=isNeg?3:2;else{if((x=x.minus(t.times(pi))).lte(halfPi))return quadrant=isOdd(t)?isNeg?2:3:isNeg?4:1,x;quadrant=isOdd(t)?isNeg?1:4:isNeg?3:2}return x.minus(pi).abs()}function toStringBinary(x,baseOut,sd,rm){var base,e,i,k,len,roundUp,str,xd,y,Ctor=x.constructor,isExp=void 0!==sd;if(isExp?(checkInt32(sd,1,1e9),void 0===rm?rm=Ctor.rounding:checkInt32(rm,0,8)):(sd=Ctor.precision,rm=Ctor.rounding),x.isFinite()){for(isExp?(base=2,16==baseOut?sd=4*sd-3:8==baseOut&&(sd=3*sd-2)):base=baseOut,(i=(str=finiteToString(x)).indexOf("."))>=0&&(str=str.replace(".",""),(y=new Ctor(1)).e=str.length-i,y.d=convertBase(finiteToString(y),10,base),y.e=y.d.length),e=len=(xd=convertBase(str,10,base)).length;0==xd[--len];)xd.pop();if(xd[0]){if(i<0?e--:((x=new Ctor(x)).d=xd,x.e=e,xd=(x=divide(x,y,sd,rm,0,base)).d,e=x.e,roundUp=inexact),i=xd[sd],k=base/2,roundUp=roundUp||void 0!==xd[sd+1],roundUp=rm<4?(void 0!==i||roundUp)&&(0===rm||rm===(x.s<0?3:2)):i>k||i===k&&(4===rm||roundUp||6===rm&&1&xd[sd-1]||rm===(x.s<0?8:7)),xd.length=sd,roundUp)for(;++xd[--sd]>base-1;)xd[sd]=0,sd||(++e,xd.unshift(1));for(len=xd.length;!xd[len-1];--len);for(i=0,str="";i<len;i++)str+=NUMERALS.charAt(xd[i]);if(isExp){if(len>1)if(16==baseOut||8==baseOut){for(i=16==baseOut?4:3,--len;len%i;len++)str+="0";for(len=(xd=convertBase(str,base,baseOut)).length;!xd[len-1];--len);for(i=1,str="1.";i<len;i++)str+=NUMERALS.charAt(xd[i])}else str=str.charAt(0)+"."+str.slice(1);str=str+(e<0?"p":"p+")+e}else if(e<0){for(;++e;)str="0"+str;str="0."+str}else if(++e>len)for(e-=len;e--;)str+="0";else e<len&&(str=str.slice(0,e)+"."+str.slice(e))}else str=isExp?"0p+0":"0";str=(16==baseOut?"0x":2==baseOut?"0b":8==baseOut?"0o":"")+str}else str=nonFiniteToString(x);return x.s<0?"-"+str:str}function truncate(arr,len){if(arr.length>len)return arr.length=len,!0}function abs(x){return new this(x).abs()}function acos(x){return new this(x).acos()}function acosh(x){return new this(x).acosh()}function add(x,y){return new this(x).plus(y)}function asin(x){return new this(x).asin()}function asinh(x){return new this(x).asinh()}function atan(x){return new this(x).atan()}function atanh(x){return new this(x).atanh()}function atan2(y,x){y=new this(y),x=new this(x);var r,pr=this.precision,rm=this.rounding,wpr=pr+4;return y.s&&x.s?y.d||x.d?!x.d||y.isZero()?(r=x.s<0?getPi(this,pr,rm):new this(0)).s=y.s:!y.d||x.isZero()?(r=getPi(this,wpr,1).times(.5)).s=y.s:x.s<0?(this.precision=wpr,this.rounding=1,r=this.atan(divide(y,x,wpr,1)),x=getPi(this,wpr,1),this.precision=pr,this.rounding=rm,r=y.s<0?r.minus(x):r.plus(x)):r=this.atan(divide(y,x,wpr,1)):(r=getPi(this,wpr,1).times(x.s>0?.25:.75)).s=y.s:r=new this(NaN),r}function cbrt(x){return new this(x).cbrt()}function ceil(x){return finalise(x=new this(x),x.e+1,2)}function config(obj){if(!obj||"object"!=typeof obj)throw Error("[DecimalError] Object expected");var i,p,v,useDefaults=!0===obj.defaults,ps=["precision",1,1e9,"rounding",0,8,"toExpNeg",-EXP_LIMIT,0,"toExpPos",0,EXP_LIMIT,"maxE",0,EXP_LIMIT,"minE",-EXP_LIMIT,0,"modulo",0,9];for(i=0;i<ps.length;i+=3)if(p=ps[i],useDefaults&&(this[p]=DEFAULTS[p]),void 0!==(v=obj[p])){if(!(mathfloor(v)===v&&v>=ps[i+1]&&v<=ps[i+2]))throw Error(invalidArgument+p+": "+v);this[p]=v}if(p="crypto",useDefaults&&(this[p]=DEFAULTS[p]),void 0!==(v=obj[p])){if(!0!==v&&!1!==v&&0!==v&&1!==v)throw Error(invalidArgument+p+": "+v);if(v){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");this[p]=!0}else this[p]=!1}return this}function cos(x){return new this(x).cos()}function cosh(x){return new this(x).cosh()}function div(x,y){return new this(x).div(y)}function exp(x){return new this(x).exp()}function floor(x){return finalise(x=new this(x),x.e+1,3)}function hypot(){var i,n,t=new this(0);for(external=!1,i=0;i<arguments.length;)if((n=new this(arguments[i++])).d)t.d&&(t=t.plus(n.times(n)));else{if(n.s)return external=!0,new this(1/0);t=n}return external=!0,t.sqrt()}function isDecimalInstance(obj){return obj instanceof Decimal||obj&&"[object Decimal]"===obj.name||!1}function ln(x){return new this(x).ln()}function log(x,y){return new this(x).log(y)}function log2(x){return new this(x).log(2)}function log10(x){return new this(x).log(10)}function max(){return maxOrMin(this,arguments,"lt")}function min(){return maxOrMin(this,arguments,"gt")}function mod(x,y){return new this(x).mod(y)}function mul(x,y){return new this(x).mul(y)}function pow(x,y){return new this(x).pow(y)}function random(sd){var d,e,k,n,i=0,r=new this(1),rd=[];if(void 0===sd?sd=this.precision:checkInt32(sd,1,1e9),k=Math.ceil(sd/7),this.crypto)if(crypto.getRandomValues)for(d=crypto.getRandomValues(new Uint32Array(k));i<k;)(n=d[i])>=429e7?d[i]=crypto.getRandomValues(new Uint32Array(1))[0]:rd[i++]=n%1e7;else{if(!crypto.randomBytes)throw Error("[DecimalError] crypto unavailable");for(d=crypto.randomBytes(k*=4);i<k;)(n=d[i]+(d[i+1]<<8)+(d[i+2]<<16)+((127&d[i+3])<<24))>=214e7?crypto.randomBytes(4).copy(d,i):(rd.push(n%1e7),i+=4);i=k/4}else for(;i<k;)rd[i++]=1e7*Math.random()|0;for(sd%=7,(k=rd[--i])&&sd&&(n=mathpow(10,7-sd),rd[i]=(k/n|0)*n);0===rd[i];i--)rd.pop();if(i<0)e=0,rd=[0];else{for(e=-1;0===rd[0];e-=7)rd.shift();for(k=1,n=rd[0];n>=10;n/=10)k++;k<7&&(e-=7-k)}return r.e=e,r.d=rd,r}function round(x){return finalise(x=new this(x),x.e+1,this.rounding)}function sign(x){return(x=new this(x)).d?x.d[0]?x.s:0*x.s:x.s||NaN}function sin(x){return new this(x).sin()}function sinh(x){return new this(x).sinh()}function sqrt(x){return new this(x).sqrt()}function sub(x,y){return new this(x).sub(y)}function tan(x){return new this(x).tan()}function tanh(x){return new this(x).tanh()}function trunc(x){return finalise(x=new this(x),x.e+1,1)}(Decimal=function clone(obj){var i,p,ps;function Decimal(v){var e,i,t,x=this;if(!(x instanceof Decimal))return new Decimal(v);if(x.constructor=Decimal,v instanceof Decimal)return x.s=v.s,void(external?!v.d||v.e>Decimal.maxE?(x.e=NaN,x.d=null):v.e<Decimal.minE?(x.e=0,x.d=[0]):(x.e=v.e,x.d=v.d.slice()):(x.e=v.e,x.d=v.d?v.d.slice():v.d));if("number"==(t=typeof v)){if(0===v)return x.s=1/v<0?-1:1,x.e=0,void(x.d=[0]);if(v<0?(v=-v,x.s=-1):x.s=1,v===~~v&&v<1e7){for(e=0,i=v;i>=10;i/=10)e++;return void(external?e>Decimal.maxE?(x.e=NaN,x.d=null):e<Decimal.minE?(x.e=0,x.d=[0]):(x.e=e,x.d=[v]):(x.e=e,x.d=[v]))}return 0*v!=0?(v||(x.s=NaN),x.e=NaN,void(x.d=null)):parseDecimal(x,v.toString())}if("string"!==t)throw Error(invalidArgument+v);return 45===(i=v.charCodeAt(0))?(v=v.slice(1),x.s=-1):(43===i&&(v=v.slice(1)),x.s=1),isDecimal.test(v)?parseDecimal(x,v):parseOther(x,v)}if(Decimal.prototype=P,Decimal.ROUND_UP=0,Decimal.ROUND_DOWN=1,Decimal.ROUND_CEIL=2,Decimal.ROUND_FLOOR=3,Decimal.ROUND_HALF_UP=4,Decimal.ROUND_HALF_DOWN=5,Decimal.ROUND_HALF_EVEN=6,Decimal.ROUND_HALF_CEIL=7,Decimal.ROUND_HALF_FLOOR=8,Decimal.EUCLID=9,Decimal.config=Decimal.set=config,Decimal.clone=clone,Decimal.isDecimal=isDecimalInstance,Decimal.abs=abs,Decimal.acos=acos,Decimal.acosh=acosh,Decimal.add=add,Decimal.asin=asin,Decimal.asinh=asinh,Decimal.atan=atan,Decimal.atanh=atanh,Decimal.atan2=atan2,Decimal.cbrt=cbrt,Decimal.ceil=ceil,Decimal.cos=cos,Decimal.cosh=cosh,Decimal.div=div,Decimal.exp=exp,Decimal.floor=floor,Decimal.hypot=hypot,Decimal.ln=ln,Decimal.log=log,Decimal.log10=log10,Decimal.log2=log2,Decimal.max=max,Decimal.min=min,Decimal.mod=mod,Decimal.mul=mul,Decimal.pow=pow,Decimal.random=random,Decimal.round=round,Decimal.sign=sign,Decimal.sin=sin,Decimal.sinh=sinh,Decimal.sqrt=sqrt,Decimal.sub=sub,Decimal.tan=tan,Decimal.tanh=tanh,Decimal.trunc=trunc,void 0===obj&&(obj={}),obj&&!0!==obj.defaults)for(ps=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<ps.length;)obj.hasOwnProperty(p=ps[i++])||(obj[p]=this[p]);return Decimal.config(obj),Decimal}(DEFAULTS)).default=Decimal.Decimal=Decimal,LN10=new Decimal(LN10),PI=new Decimal(PI),"function"==typeof define&&define.amd?define((function(){return Decimal})):void 0!==module&&module.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(P[Symbol.for("nodejs.util.inspect.custom")]=P.toString,P[Symbol.toStringTag]="Decimal"),module.exports=Decimal):(globalScope||(globalScope="undefined"!=typeof self&&self&&self.self==self?self:window),noConflict=globalScope.Decimal,Decimal.noConflict=function(){return globalScope.Decimal=noConflict,Decimal},globalScope.Decimal=Decimal)}(this)},{}],19:[function(require,module,exports){"use strict";const Yallist=require("yallist"),MAX=Symbol("max"),LENGTH=Symbol("length"),LENGTH_CALCULATOR=Symbol("lengthCalculator"),ALLOW_STALE=Symbol("allowStale"),MAX_AGE=Symbol("maxAge"),DISPOSE=Symbol("dispose"),NO_DISPOSE_ON_SET=Symbol("noDisposeOnSet"),LRU_LIST=Symbol("lruList"),CACHE=Symbol("cache"),UPDATE_AGE_ON_GET=Symbol("updateAgeOnGet"),naiveLength=()=>1,get=(self,key,doUse)=>{const node=self[CACHE].get(key);if(node){const hit=node.value;if(isStale(self,hit)){if(del(self,node),!self[ALLOW_STALE])return}else doUse&&(self[UPDATE_AGE_ON_GET]&&(node.value.now=Date.now()),self[LRU_LIST].unshiftNode(node));return hit.value}},isStale=(self,hit)=>{if(!hit||!hit.maxAge&&!self[MAX_AGE])return!1;const diff=Date.now()-hit.now;return hit.maxAge?diff>hit.maxAge:self[MAX_AGE]&&diff>self[MAX_AGE]},trim=self=>{if(self[LENGTH]>self[MAX])for(let walker=self[LRU_LIST].tail;self[LENGTH]>self[MAX]&&null!==walker;){const prev=walker.prev;del(self,walker),walker=prev}},del=(self,node)=>{if(node){const hit=node.value;self[DISPOSE]&&self[DISPOSE](hit.key,hit.value),self[LENGTH]-=hit.length,self[CACHE].delete(hit.key),self[LRU_LIST].removeNode(node)}};class Entry{constructor(key,value,length,now,maxAge){this.key=key,this.value=value,this.length=length,this.now=now,this.maxAge=maxAge||0}}const forEachStep=(self,fn,node,thisp)=>{let hit=node.value;isStale(self,hit)&&(del(self,node),self[ALLOW_STALE]||(hit=void 0)),hit&&fn.call(thisp,hit.value,hit.key,self)};module.exports=class{constructor(options){if("number"==typeof options&&(options={max:options}),options||(options={}),options.max&&("number"!=typeof options.max||options.max<0))throw new TypeError("max must be a non-negative number");this[MAX]=options.max||1/0;const lc=options.length||naiveLength;if(this[LENGTH_CALCULATOR]="function"!=typeof lc?naiveLength:lc,this[ALLOW_STALE]=options.stale||!1,options.maxAge&&"number"!=typeof options.maxAge)throw new TypeError("maxAge must be a number");this[MAX_AGE]=options.maxAge||0,this[DISPOSE]=options.dispose,this[NO_DISPOSE_ON_SET]=options.noDisposeOnSet||!1,this[UPDATE_AGE_ON_GET]=options.updateAgeOnGet||!1,this.reset()}set max(mL){if("number"!=typeof mL||mL<0)throw new TypeError("max must be a non-negative number");this[MAX]=mL||1/0,trim(this)}get max(){return this[MAX]}set allowStale(allowStale){this[ALLOW_STALE]=!!allowStale}get allowStale(){return this[ALLOW_STALE]}set maxAge(mA){if("number"!=typeof mA)throw new TypeError("maxAge must be a non-negative number");this[MAX_AGE]=mA,trim(this)}get maxAge(){return this[MAX_AGE]}set lengthCalculator(lC){"function"!=typeof lC&&(lC=naiveLength),lC!==this[LENGTH_CALCULATOR]&&(this[LENGTH_CALCULATOR]=lC,this[LENGTH]=0,this[LRU_LIST].forEach((hit=>{hit.length=this[LENGTH_CALCULATOR](hit.value,hit.key),this[LENGTH]+=hit.length}))),trim(this)}get lengthCalculator(){return this[LENGTH_CALCULATOR]}get length(){return this[LENGTH]}get itemCount(){return this[LRU_LIST].length}rforEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].tail;null!==walker;){const prev=walker.prev;forEachStep(this,fn,walker,thisp),walker=prev}}forEach(fn,thisp){thisp=thisp||this;for(let walker=this[LRU_LIST].head;null!==walker;){const next=walker.next;forEachStep(this,fn,walker,thisp),walker=next}}keys(){return this[LRU_LIST].toArray().map((k=>k.key))}values(){return this[LRU_LIST].toArray().map((k=>k.value))}reset(){this[DISPOSE]&&this[LRU_LIST]&&this[LRU_LIST].length&&this[LRU_LIST].forEach((hit=>this[DISPOSE](hit.key,hit.value))),this[CACHE]=new Map,this[LRU_LIST]=new Yallist,this[LENGTH]=0}dump(){return this[LRU_LIST].map((hit=>!isStale(this,hit)&&{k:hit.key,v:hit.value,e:hit.now+(hit.maxAge||0)})).toArray().filter((h=>h))}dumpLru(){return this[LRU_LIST]}set(key,value,maxAge){if((maxAge=maxAge||this[MAX_AGE])&&"number"!=typeof maxAge)throw new TypeError("maxAge must be a number");const now=maxAge?Date.now():0,len=this[LENGTH_CALCULATOR](value,key);if(this[CACHE].has(key)){if(len>this[MAX])return del(this,this[CACHE].get(key)),!1;const item=this[CACHE].get(key).value;return this[DISPOSE]&&(this[NO_DISPOSE_ON_SET]||this[DISPOSE](key,item.value)),item.now=now,item.maxAge=maxAge,item.value=value,this[LENGTH]+=len-item.length,item.length=len,this.get(key),trim(this),!0}const hit=new Entry(key,value,len,now,maxAge);return hit.length>this[MAX]?(this[DISPOSE]&&this[DISPOSE](key,value),!1):(this[LENGTH]+=hit.length,this[LRU_LIST].unshift(hit),this[CACHE].set(key,this[LRU_LIST].head),trim(this),!0)}has(key){if(!this[CACHE].has(key))return!1;const hit=this[CACHE].get(key).value;return!isStale(this,hit)}get(key){return get(this,key,!0)}peek(key){return get(this,key,!1)}pop(){const node=this[LRU_LIST].tail;return node?(del(this,node),node.value):null}del(key){del(this,this[CACHE].get(key))}load(arr){this.reset();const now=Date.now();for(let l=arr.length-1;l>=0;l--){const hit=arr[l],expiresAt=hit.e||0;if(0===expiresAt)this.set(hit.k,hit.v);else{const maxAge=expiresAt-now;maxAge>0&&this.set(hit.k,hit.v,maxAge)}}}prune(){this[CACHE].forEach(((value,key)=>get(this,key,!1)))}}},{yallist:65}],20:[function(require,module,exports){const ANY=Symbol("SemVer ANY");class Comparator{static get ANY(){return ANY}constructor(comp,options){if(options=parseOptions(options),comp instanceof Comparator){if(comp.loose===!!options.loose)return comp;comp=comp.value}comp=comp.trim().split(/\s+/).join(" "),debug("comparator",comp,options),this.options=options,this.loose=!!options.loose,this.parse(comp),this.semver===ANY?this.value="":this.value=this.operator+this.semver.version,debug("comp",this)}parse(comp){const r=this.options.loose?re[t.COMPARATORLOOSE]:re[t.COMPARATOR],m=comp.match(r);if(!m)throw new TypeError(`Invalid comparator: ${comp}`);this.operator=void 0!==m[1]?m[1]:"","="===this.operator&&(this.operator=""),m[2]?this.semver=new SemVer(m[2],this.options.loose):this.semver=ANY}toString(){return this.value}test(version){if(debug("Comparator.test",version,this.options.loose),this.semver===ANY||version===ANY)return!0;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}return cmp(version,this.operator,this.semver,this.options)}intersects(comp,options){if(!(comp instanceof Comparator))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new Range(comp.value,options).test(this.value):""===comp.operator?""===comp.value||new Range(this.value,options).test(comp.semver):!((options=parseOptions(options)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===comp.value)||!options.includePrerelease&&(this.value.startsWith("<0.0.0")||comp.value.startsWith("<0.0.0"))||(!this.operator.startsWith(">")||!comp.operator.startsWith(">"))&&(!this.operator.startsWith("<")||!comp.operator.startsWith("<"))&&(this.semver.version!==comp.semver.version||!this.operator.includes("=")||!comp.operator.includes("="))&&!(cmp(this.semver,"<",comp.semver,options)&&this.operator.startsWith(">")&&comp.operator.startsWith("<"))&&!(cmp(this.semver,">",comp.semver,options)&&this.operator.startsWith("<")&&comp.operator.startsWith(">")))}}module.exports=Comparator;const parseOptions=require("../internal/parse-options"),{safeRe:re,t:t}=require("../internal/re"),cmp=require("../functions/cmp"),debug=require("../internal/debug"),SemVer=require("./semver"),Range=require("./range")},{"../functions/cmp":24,"../internal/debug":49,"../internal/parse-options":51,"../internal/re":52,"./range":21,"./semver":22}],21:[function(require,module,exports){class Range{constructor(range,options){if(options=parseOptions(options),range instanceof Range)return range.loose===!!options.loose&&range.includePrerelease===!!options.includePrerelease?range:new Range(range.raw,options);if(range instanceof Comparator)return this.raw=range.value,this.set=[[range]],this.format(),this;if(this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease,this.raw=range.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map((r=>this.parseRange(r.trim()))).filter((c=>c.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const first=this.set[0];if(this.set=this.set.filter((c=>!isNullSet(c[0]))),0===this.set.length)this.set=[first];else if(this.set.length>1)for(const c of this.set)if(1===c.length&&isAny(c[0])){this.set=[c];break}}this.format()}format(){return this.range=this.set.map((comps=>comps.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(range){const memoKey=((this.options.includePrerelease&&FLAG_INCLUDE_PRERELEASE)|(this.options.loose&&FLAG_LOOSE))+":"+range,cached=cache.get(memoKey);if(cached)return cached;const loose=this.options.loose,hr=loose?re[t.HYPHENRANGELOOSE]:re[t.HYPHENRANGE];range=range.replace(hr,hyphenReplace(this.options.includePrerelease)),debug("hyphen replace",range),range=range.replace(re[t.COMPARATORTRIM],comparatorTrimReplace),debug("comparator trim",range),range=range.replace(re[t.TILDETRIM],tildeTrimReplace),debug("tilde trim",range),range=range.replace(re[t.CARETTRIM],caretTrimReplace),debug("caret trim",range);let rangeList=range.split(" ").map((comp=>parseComparator(comp,this.options))).join(" ").split(/\s+/).map((comp=>replaceGTE0(comp,this.options)));loose&&(rangeList=rangeList.filter((comp=>(debug("loose invalid filter",comp,this.options),!!comp.match(re[t.COMPARATORLOOSE]))))),debug("range list",rangeList);const rangeMap=new Map,comparators=rangeList.map((comp=>new Comparator(comp,this.options)));for(const comp of comparators){if(isNullSet(comp))return[comp];rangeMap.set(comp.value,comp)}rangeMap.size>1&&rangeMap.has("")&&rangeMap.delete("");const result=[...rangeMap.values()];return cache.set(memoKey,result),result}intersects(range,options){if(!(range instanceof Range))throw new TypeError("a Range is required");return this.set.some((thisComparators=>isSatisfiable(thisComparators,options)&&range.set.some((rangeComparators=>isSatisfiable(rangeComparators,options)&&thisComparators.every((thisComparator=>rangeComparators.every((rangeComparator=>thisComparator.intersects(rangeComparator,options)))))))))}test(version){if(!version)return!1;if("string"==typeof version)try{version=new SemVer(version,this.options)}catch(er){return!1}for(let i=0;i<this.set.length;i++)if(testSet(this.set[i],version,this.options))return!0;return!1}}module.exports=Range;const cache=new(require("lru-cache"))({max:1e3}),parseOptions=require("../internal/parse-options"),Comparator=require("./comparator"),debug=require("../internal/debug"),SemVer=require("./semver"),{safeRe:re,t:t,comparatorTrimReplace:comparatorTrimReplace,tildeTrimReplace:tildeTrimReplace,caretTrimReplace:caretTrimReplace}=require("../internal/re"),{FLAG_INCLUDE_PRERELEASE:FLAG_INCLUDE_PRERELEASE,FLAG_LOOSE:FLAG_LOOSE}=require("../internal/constants"),isNullSet=c=>"<0.0.0-0"===c.value,isAny=c=>""===c.value,isSatisfiable=(comparators,options)=>{let result=!0;const remainingComparators=comparators.slice();let testComparator=remainingComparators.pop();for(;result&&remainingComparators.length;)result=remainingComparators.every((otherComparator=>testComparator.intersects(otherComparator,options))),testComparator=remainingComparators.pop();return result},parseComparator=(comp,options)=>(debug("comp",comp,options),comp=replaceCarets(comp,options),debug("caret",comp),comp=replaceTildes(comp,options),debug("tildes",comp),comp=replaceXRanges(comp,options),debug("xrange",comp),comp=replaceStars(comp,options),debug("stars",comp),comp),isX=id=>!id||"x"===id.toLowerCase()||"*"===id,replaceTildes=(comp,options)=>comp.trim().split(/\s+/).map((c=>replaceTilde(c,options))).join(" "),replaceTilde=(comp,options)=>{const r=options.loose?re[t.TILDELOOSE]:re[t.TILDE];return comp.replace(r,((_,M,m,p,pr)=>{let ret;return debug("tilde",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=`>=${M}.0.0 <${+M+1}.0.0-0`:isX(p)?ret=`>=${M}.${m}.0 <${M}.${+m+1}.0-0`:pr?(debug("replaceTilde pr",pr),ret=`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`):ret=`>=${M}.${m}.${p} <${M}.${+m+1}.0-0`,debug("tilde return",ret),ret}))},replaceCarets=(comp,options)=>comp.trim().split(/\s+/).map((c=>replaceCaret(c,options))).join(" "),replaceCaret=(comp,options)=>{debug("caret",comp,options);const r=options.loose?re[t.CARETLOOSE]:re[t.CARET],z=options.includePrerelease?"-0":"";return comp.replace(r,((_,M,m,p,pr)=>{let ret;return debug("caret",comp,_,M,m,p,pr),isX(M)?ret="":isX(m)?ret=`>=${M}.0.0${z} <${+M+1}.0.0-0`:isX(p)?ret="0"===M?`>=${M}.${m}.0${z} <${M}.${+m+1}.0-0`:`>=${M}.${m}.0${z} <${+M+1}.0.0-0`:pr?(debug("replaceCaret pr",pr),ret="0"===M?"0"===m?`>=${M}.${m}.${p}-${pr} <${M}.${m}.${+p+1}-0`:`>=${M}.${m}.${p}-${pr} <${M}.${+m+1}.0-0`:`>=${M}.${m}.${p}-${pr} <${+M+1}.0.0-0`):(debug("no pr"),ret="0"===M?"0"===m?`>=${M}.${m}.${p}${z} <${M}.${m}.${+p+1}-0`:`>=${M}.${m}.${p}${z} <${M}.${+m+1}.0-0`:`>=${M}.${m}.${p} <${+M+1}.0.0-0`),debug("caret return",ret),ret}))},replaceXRanges=(comp,options)=>(debug("replaceXRanges",comp,options),comp.split(/\s+/).map((c=>replaceXRange(c,options))).join(" ")),replaceXRange=(comp,options)=>{comp=comp.trim();const r=options.loose?re[t.XRANGELOOSE]:re[t.XRANGE];return comp.replace(r,((ret,gtlt,M,m,p,pr)=>{debug("xRange",comp,ret,gtlt,M,m,p,pr);const xM=isX(M),xm=xM||isX(m),xp=xm||isX(p),anyX=xp;return"="===gtlt&&anyX&&(gtlt=""),pr=options.includePrerelease?"-0":"",xM?ret=">"===gtlt||"<"===gtlt?"<0.0.0-0":"*":gtlt&&anyX?(xm&&(m=0),p=0,">"===gtlt?(gtlt=">=",xm?(M=+M+1,m=0,p=0):(m=+m+1,p=0)):"<="===gtlt&&(gtlt="<",xm?M=+M+1:m=+m+1),"<"===gtlt&&(pr="-0"),ret=`${gtlt+M}.${m}.${p}${pr}`):xm?ret=`>=${M}.0.0${pr} <${+M+1}.0.0-0`:xp&&(ret=`>=${M}.${m}.0${pr} <${M}.${+m+1}.0-0`),debug("xRange return",ret),ret}))},replaceStars=(comp,options)=>(debug("replaceStars",comp,options),comp.trim().replace(re[t.STAR],"")),replaceGTE0=(comp,options)=>(debug("replaceGTE0",comp,options),comp.trim().replace(re[options.includePrerelease?t.GTE0PRE:t.GTE0],"")),hyphenReplace=incPr=>($0,from,fM,fm,fp,fpr,fb,to,tM,tm,tp,tpr,tb)=>`${from=isX(fM)?"":isX(fm)?`>=${fM}.0.0${incPr?"-0":""}`:isX(fp)?`>=${fM}.${fm}.0${incPr?"-0":""}`:fpr?`>=${from}`:`>=${from}${incPr?"-0":""}`} ${to=isX(tM)?"":isX(tm)?`<${+tM+1}.0.0-0`:isX(tp)?`<${tM}.${+tm+1}.0-0`:tpr?`<=${tM}.${tm}.${tp}-${tpr}`:incPr?`<${tM}.${tm}.${+tp+1}-0`:`<=${to}`}`.trim(),testSet=(set,version,options)=>{for(let i=0;i<set.length;i++)if(!set[i].test(version))return!1;if(version.prerelease.length&&!options.includePrerelease){for(let i=0;i<set.length;i++)if(debug(set[i].semver),set[i].semver!==Comparator.ANY&&set[i].semver.prerelease.length>0){const allowed=set[i].semver;if(allowed.major===version.major&&allowed.minor===version.minor&&allowed.patch===version.patch)return!0}return!1}return!0}},{"../internal/constants":48,"../internal/debug":49,"../internal/parse-options":51,"../internal/re":52,"./comparator":20,"./semver":22,"lru-cache":19}],22:[function(require,module,exports){const debug=require("../internal/debug"),{MAX_LENGTH:MAX_LENGTH,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER}=require("../internal/constants"),{safeRe:re,t:t}=require("../internal/re"),parseOptions=require("../internal/parse-options"),{compareIdentifiers:compareIdentifiers}=require("../internal/identifiers");class SemVer{constructor(version,options){if(options=parseOptions(options),version instanceof SemVer){if(version.loose===!!options.loose&&version.includePrerelease===!!options.includePrerelease)return version;version=version.version}else if("string"!=typeof version)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof version}".`);if(version.length>MAX_LENGTH)throw new TypeError(`version is longer than ${MAX_LENGTH} characters`);debug("SemVer",version,options),this.options=options,this.loose=!!options.loose,this.includePrerelease=!!options.includePrerelease;const m=version.trim().match(options.loose?re[t.LOOSE]:re[t.FULL]);if(!m)throw new TypeError(`Invalid Version: ${version}`);if(this.raw=version,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map((id=>{if(/^[0-9]+$/.test(id)){const num=+id;if(num>=0&&num<MAX_SAFE_INTEGER)return num}return id})):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(other){if(debug("SemVer.compare",this.version,this.options,other),!(other instanceof SemVer)){if("string"==typeof other&&other===this.version)return 0;other=new SemVer(other,this.options)}return other.version===this.version?0:this.compareMain(other)||this.comparePre(other)}compareMain(other){return other instanceof SemVer||(other=new SemVer(other,this.options)),compareIdentifiers(this.major,other.major)||compareIdentifiers(this.minor,other.minor)||compareIdentifiers(this.patch,other.patch)}comparePre(other){if(other instanceof SemVer||(other=new SemVer(other,this.options)),this.prerelease.length&&!other.prerelease.length)return-1;if(!this.prerelease.length&&other.prerelease.length)return 1;if(!this.prerelease.length&&!other.prerelease.length)return 0;let i=0;do{const a=this.prerelease[i],b=other.prerelease[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)}compareBuild(other){other instanceof SemVer||(other=new SemVer(other,this.options));let i=0;do{const a=this.build[i],b=other.build[i];if(debug("prerelease compare",i,a,b),void 0===a&&void 0===b)return 0;if(void 0===b)return 1;if(void 0===a)return-1;if(a!==b)return compareIdentifiers(a,b)}while(++i)}inc(release,identifier,identifierBase){switch(release){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",identifier,identifierBase);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",identifier,identifierBase);break;case"prepatch":this.prerelease.length=0,this.inc("patch",identifier,identifierBase),this.inc("pre",identifier,identifierBase);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",identifier,identifierBase),this.inc("pre",identifier,identifierBase);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const base=Number(identifierBase)?1:0;if(!identifier&&!1===identifierBase)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[base];else{let i=this.prerelease.length;for(;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);if(-1===i){if(identifier===this.prerelease.join(".")&&!1===identifierBase)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(base)}}if(identifier){let prerelease=[identifier,base];!1===identifierBase&&(prerelease=[identifier]),0===compareIdentifiers(this.prerelease[0],identifier)?isNaN(this.prerelease[1])&&(this.prerelease=prerelease):this.prerelease=prerelease}break}default:throw new Error(`invalid increment argument: ${release}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}module.exports=SemVer},{"../internal/constants":48,"../internal/debug":49,"../internal/identifiers":50,"../internal/parse-options":51,"../internal/re":52}],23:[function(require,module,exports){const parse=require("./parse");module.exports=(version,options)=>{const s=parse(version.trim().replace(/^[=v]+/,""),options);return s?s.version:null}},{"./parse":39}],24:[function(require,module,exports){const eq=require("./eq"),neq=require("./neq"),gt=require("./gt"),gte=require("./gte"),lt=require("./lt"),lte=require("./lte");module.exports=(a,op,b,loose)=>{switch(op){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a===b;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof b&&(b=b.version),a!==b;case"":case"=":case"==":return eq(a,b,loose);case"!=":return neq(a,b,loose);case">":return gt(a,b,loose);case">=":return gte(a,b,loose);case"<":return lt(a,b,loose);case"<=":return lte(a,b,loose);default:throw new TypeError(`Invalid operator: ${op}`)}}},{"./eq":30,"./gt":31,"./gte":32,"./lt":34,"./lte":35,"./neq":38}],25:[function(require,module,exports){const SemVer=require("../classes/semver"),parse=require("./parse"),{safeRe:re,t:t}=require("../internal/re");module.exports=(version,options)=>{if(version instanceof SemVer)return version;if("number"==typeof version&&(version=String(version)),"string"!=typeof version)return null;let match=null;if((options=options||{}).rtl){let next;for(;(next=re[t.COERCERTL].exec(version))&&(!match||match.index+match[0].length!==version.length);)match&&next.index+next[0].length===match.index+match[0].length||(match=next),re[t.COERCERTL].lastIndex=next.index+next[1].length+next[2].length;re[t.COERCERTL].lastIndex=-1}else match=version.match(re[t.COERCE]);return null===match?null:parse(`${match[2]}.${match[3]||"0"}.${match[4]||"0"}`,options)}},{"../classes/semver":22,"../internal/re":52,"./parse":39}],26:[function(require,module,exports){const SemVer=require("../classes/semver");module.exports=(a,b,loose)=>{const versionA=new SemVer(a,loose),versionB=new SemVer(b,loose);return versionA.compare(versionB)||versionA.compareBuild(versionB)}},{"../classes/semver":22}],27:[function(require,module,exports){const compare=require("./compare");module.exports=(a,b)=>compare(a,b,!0)},{"./compare":28}],28:[function(require,module,exports){const SemVer=require("../classes/semver");module.exports=(a,b,loose)=>new SemVer(a,loose).compare(new SemVer(b,loose))},{"../classes/semver":22}],29:[function(require,module,exports){const parse=require("./parse.js");module.exports=(version1,version2)=>{const v1=parse(version1,null,!0),v2=parse(version2,null,!0),comparison=v1.compare(v2);if(0===comparison)return null;const v1Higher=comparison>0,highVersion=v1Higher?v1:v2,lowVersion=v1Higher?v2:v1,highHasPre=!!highVersion.prerelease.length;if(lowVersion.prerelease.length&&!highHasPre)return lowVersion.patch||lowVersion.minor?highVersion.patch?"patch":highVersion.minor?"minor":"major":"major";const prefix=highHasPre?"pre":"";return v1.major!==v2.major?prefix+"major":v1.minor!==v2.minor?prefix+"minor":v1.patch!==v2.patch?prefix+"patch":"prerelease"}},{"./parse.js":39}],30:[function(require,module,exports){const compare=require("./compare");module.exports=(a,b,loose)=>0===compare(a,b,loose)},{"./compare":28}],31:[function(require,module,exports){const compare=require("./compare");module.exports=(a,b,loose)=>compare(a,b,loose)>0},{"./compare":28}],32:[function(require,module,exports){const compare=require("./compare");module.exports=(a,b,loose)=>compare(a,b,loose)>=0},{"./compare":28}],33:[function(require,module,exports){const SemVer=require("../classes/semver");module.exports=(version,release,options,identifier,identifierBase)=>{"string"==typeof options&&(identifierBase=identifier,identifier=options,options=void 0);try{return new SemVer(version instanceof SemVer?version.version:version,options).inc(release,identifier,identifierBase).version}catch(er){return null}}},{"../classes/semver":22}],34:[function(require,module,exports){const compare=require("./compare");module.exports=(a,b,loose)=>compare(a,b,loose)<0},{"./compare":28}],35:[function(require,module,exports){const compare=require("./compare");module.exports=(a,b,loose)=>compare(a,b,loose)<=0},{"./compare":28}],36:[function(require,module,exports){const SemVer=require("../classes/semver");module.exports=(a,loose)=>new SemVer(a,loose).major},{"../classes/semver":22}],37:[function(require,module,exports){const SemVer=require("../classes/semver");module.exports=(a,loose)=>new SemVer(a,loose).minor},{"../classes/semver":22}],38:[function(require,module,exports){const compare=require("./compare");module.exports=(a,b,loose)=>0!==compare(a,b,loose)},{"./compare":28}],39:[function(require,module,exports){const SemVer=require("../classes/semver");module.exports=(version,options,throwErrors=!1)=>{if(version instanceof SemVer)return version;try{return new SemVer(version,options)}catch(er){if(!throwErrors)return null;throw er}}},{"../classes/semver":22}],40:[function(require,module,exports){const SemVer=require("../classes/semver");module.exports=(a,loose)=>new SemVer(a,loose).patch},{"../classes/semver":22}],41:[function(require,module,exports){const parse=require("./parse");module.exports=(version,options)=>{const parsed=parse(version,options);return parsed&&parsed.prerelease.length?parsed.prerelease:null}},{"./parse":39}],42:[function(require,module,exports){const compare=require("./compare");module.exports=(a,b,loose)=>compare(b,a,loose)},{"./compare":28}],43:[function(require,module,exports){const compareBuild=require("./compare-build");module.exports=(list,loose)=>list.sort(((a,b)=>compareBuild(b,a,loose)))},{"./compare-build":26}],44:[function(require,module,exports){const Range=require("../classes/range");module.exports=(version,range,options)=>{try{range=new Range(range,options)}catch(er){return!1}return range.test(version)}},{"../classes/range":21}],45:[function(require,module,exports){const compareBuild=require("./compare-build");module.exports=(list,loose)=>list.sort(((a,b)=>compareBuild(a,b,loose)))},{"./compare-build":26}],46:[function(require,module,exports){const parse=require("./parse");module.exports=(version,options)=>{const v=parse(version,options);return v?v.version:null}},{"./parse":39}],47:[function(require,module,exports){const internalRe=require("./internal/re"),constants=require("./internal/constants"),SemVer=require("./classes/semver"),identifiers=require("./internal/identifiers"),parse=require("./functions/parse"),valid=require("./functions/valid"),clean=require("./functions/clean"),inc=require("./functions/inc"),diff=require("./functions/diff"),major=require("./functions/major"),minor=require("./functions/minor"),patch=require("./functions/patch"),prerelease=require("./functions/prerelease"),compare=require("./functions/compare"),rcompare=require("./functions/rcompare"),compareLoose=require("./functions/compare-loose"),compareBuild=require("./functions/compare-build"),sort=require("./functions/sort"),rsort=require("./functions/rsort"),gt=require("./functions/gt"),lt=require("./functions/lt"),eq=require("./functions/eq"),neq=require("./functions/neq"),gte=require("./functions/gte"),lte=require("./functions/lte"),cmp=require("./functions/cmp"),coerce=require("./functions/coerce"),Comparator=require("./classes/comparator"),Range=require("./classes/range"),satisfies=require("./functions/satisfies"),toComparators=require("./ranges/to-comparators"),maxSatisfying=require("./ranges/max-satisfying"),minSatisfying=require("./ranges/min-satisfying"),minVersion=require("./ranges/min-version"),validRange=require("./ranges/valid"),outside=require("./ranges/outside"),gtr=require("./ranges/gtr"),ltr=require("./ranges/ltr"),intersects=require("./ranges/intersects"),simplifyRange=require("./ranges/simplify"),subset=require("./ranges/subset");module.exports={parse:parse,valid:valid,clean:clean,inc:inc,diff:diff,major:major,minor:minor,patch:patch,prerelease:prerelease,compare:compare,rcompare:rcompare,compareLoose:compareLoose,compareBuild:compareBuild,sort:sort,rsort:rsort,gt:gt,lt:lt,eq:eq,neq:neq,gte:gte,lte:lte,cmp:cmp,coerce:coerce,Comparator:Comparator,Range:Range,satisfies:satisfies,toComparators:toComparators,maxSatisfying:maxSatisfying,minSatisfying:minSatisfying,minVersion:minVersion,validRange:validRange,outside:outside,gtr:gtr,ltr:ltr,intersects:intersects,simplifyRange:simplifyRange,subset:subset,SemVer:SemVer,re:internalRe.re,src:internalRe.src,tokens:internalRe.t,SEMVER_SPEC_VERSION:constants.SEMVER_SPEC_VERSION,RELEASE_TYPES:constants.RELEASE_TYPES,compareIdentifiers:identifiers.compareIdentifiers,rcompareIdentifiers:identifiers.rcompareIdentifiers}},{"./classes/comparator":20,"./classes/range":21,"./classes/semver":22,"./functions/clean":23,"./functions/cmp":24,"./functions/coerce":25,"./functions/compare":28,"./functions/compare-build":26,"./functions/compare-loose":27,"./functions/diff":29,"./functions/eq":30,"./functions/gt":31,"./functions/gte":32,"./functions/inc":33,"./functions/lt":34,"./functions/lte":35,"./functions/major":36,"./functions/minor":37,"./functions/neq":38,"./functions/parse":39,"./functions/patch":40,"./functions/prerelease":41,"./functions/rcompare":42,"./functions/rsort":43,"./functions/satisfies":44,"./functions/sort":45,"./functions/valid":46,"./internal/constants":48,"./internal/identifiers":50,"./internal/re":52,"./ranges/gtr":53,"./ranges/intersects":54,"./ranges/ltr":55,"./ranges/max-satisfying":56,"./ranges/min-satisfying":57,"./ranges/min-version":58,"./ranges/outside":59,"./ranges/simplify":60,"./ranges/subset":61,"./ranges/to-comparators":62,"./ranges/valid":63}],48:[function(require,module,exports){const MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||9007199254740991;module.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:MAX_SAFE_INTEGER,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}},{}],49:[function(require,module,exports){(function(process){const debug="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...args)=>console.error("SEMVER",...args):()=>{};module.exports=debug}).call(this,require("_process"))},{_process:17}],50:[function(require,module,exports){const numeric=/^[0-9]+$/,compareIdentifiers=(a,b)=>{const anum=numeric.test(a),bnum=numeric.test(b);return anum&&bnum&&(a=+a,b=+b),a===b?0:anum&&!bnum?-1:bnum&&!anum?1:a<b?-1:1};module.exports={compareIdentifiers:compareIdentifiers,rcompareIdentifiers:(a,b)=>compareIdentifiers(b,a)}},{}],51:[function(require,module,exports){const looseOption=Object.freeze({loose:!0}),emptyOpts=Object.freeze({});module.exports=options=>options?"object"!=typeof options?looseOption:options:emptyOpts},{}],52:[function(require,module,exports){const{MAX_SAFE_COMPONENT_LENGTH:MAX_SAFE_COMPONENT_LENGTH,MAX_SAFE_BUILD_LENGTH:MAX_SAFE_BUILD_LENGTH,MAX_LENGTH:MAX_LENGTH}=require("./constants"),debug=require("./debug"),re=(exports=module.exports={}).re=[],safeRe=exports.safeRe=[],src=exports.src=[],t=exports.t={};let R=0;const safeRegexReplacements=[["\\s",1],["\\d",MAX_LENGTH],["[a-zA-Z0-9-]",MAX_SAFE_BUILD_LENGTH]],createToken=(name,value,isGlobal)=>{const safe=(value=>{for(const[token,max]of safeRegexReplacements)value=value.split(`${token}*`).join(`${token}{0,${max}}`).split(`${token}+`).join(`${token}{1,${max}}`);return value})(value),index=R++;debug(name,index,value),t[name]=index,src[index]=value,re[index]=new RegExp(value,isGlobal?"g":void 0),safeRe[index]=new RegExp(safe,isGlobal?"g":void 0)};createToken("NUMERICIDENTIFIER","0|[1-9]\\d*"),createToken("NUMERICIDENTIFIERLOOSE","\\d+"),createToken("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),createToken("MAINVERSION",`(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})\\.(${src[t.NUMERICIDENTIFIER]})`),createToken("MAINVERSIONLOOSE",`(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})\\.(${src[t.NUMERICIDENTIFIERLOOSE]})`),createToken("PRERELEASEIDENTIFIER",`(?:${src[t.NUMERICIDENTIFIER]}|${src[t.NONNUMERICIDENTIFIER]})`),createToken("PRERELEASEIDENTIFIERLOOSE",`(?:${src[t.NUMERICIDENTIFIERLOOSE]}|${src[t.NONNUMERICIDENTIFIER]})`),createToken("PRERELEASE",`(?:-(${src[t.PRERELEASEIDENTIFIER]}(?:\\.${src[t.PRERELEASEIDENTIFIER]})*))`),createToken("PRERELEASELOOSE",`(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`),createToken("BUILDIDENTIFIER","[a-zA-Z0-9-]+"),createToken("BUILD",`(?:\\+(${src[t.BUILDIDENTIFIER]}(?:\\.${src[t.BUILDIDENTIFIER]})*))`),createToken("FULLPLAIN",`v?${src[t.MAINVERSION]}${src[t.PRERELEASE]}?${src[t.BUILD]}?`),createToken("FULL",`^${src[t.FULLPLAIN]}$`),createToken("LOOSEPLAIN",`[v=\\s]*${src[t.MAINVERSIONLOOSE]}${src[t.PRERELEASELOOSE]}?${src[t.BUILD]}?`),createToken("LOOSE",`^${src[t.LOOSEPLAIN]}$`),createToken("GTLT","((?:<|>)?=?)"),createToken("XRANGEIDENTIFIERLOOSE",`${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),createToken("XRANGEIDENTIFIER",`${src[t.NUMERICIDENTIFIER]}|x|X|\\*`),createToken("XRANGEPLAIN",`[v=\\s]*(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:\\.(${src[t.XRANGEIDENTIFIER]})(?:${src[t.PRERELEASE]})?${src[t.BUILD]}?)?)?`),createToken("XRANGEPLAINLOOSE",`[v=\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:\\.(${src[t.XRANGEIDENTIFIERLOOSE]})(?:${src[t.PRERELEASELOOSE]})?${src[t.BUILD]}?)?)?`),createToken("XRANGE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAIN]}$`),createToken("XRANGELOOSE",`^${src[t.GTLT]}\\s*${src[t.XRANGEPLAINLOOSE]}$`),createToken("COERCE",`(^|[^\\d])(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?(?:$|[^\\d])`),createToken("COERCERTL",src[t.COERCE],!0),createToken("LONETILDE","(?:~>?)"),createToken("TILDETRIM",`(\\s*)${src[t.LONETILDE]}\\s+`,!0),exports.tildeTrimReplace="$1~",createToken("TILDE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`),createToken("TILDELOOSE",`^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`),createToken("LONECARET","(?:\\^)"),createToken("CARETTRIM",`(\\s*)${src[t.LONECARET]}\\s+`,!0),exports.caretTrimReplace="$1^",createToken("CARET",`^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`),createToken("CARETLOOSE",`^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`),createToken("COMPARATORLOOSE",`^${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]})$|^$`),createToken("COMPARATOR",`^${src[t.GTLT]}\\s*(${src[t.FULLPLAIN]})$|^$`),createToken("COMPARATORTRIM",`(\\s*)${src[t.GTLT]}\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`,!0),exports.comparatorTrimReplace="$1$2$3",createToken("HYPHENRANGE",`^\\s*(${src[t.XRANGEPLAIN]})\\s+-\\s+(${src[t.XRANGEPLAIN]})\\s*$`),createToken("HYPHENRANGELOOSE",`^\\s*(${src[t.XRANGEPLAINLOOSE]})\\s+-\\s+(${src[t.XRANGEPLAINLOOSE]})\\s*$`),createToken("STAR","(<|>)?=?\\s*\\*"),createToken("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),createToken("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")},{"./constants":48,"./debug":49}],53:[function(require,module,exports){const outside=require("./outside");module.exports=(version,range,options)=>outside(version,range,">",options)},{"./outside":59}],54:[function(require,module,exports){const Range=require("../classes/range");module.exports=(r1,r2,options)=>(r1=new Range(r1,options),r2=new Range(r2,options),r1.intersects(r2,options))},{"../classes/range":21}],55:[function(require,module,exports){const outside=require("./outside");module.exports=(version,range,options)=>outside(version,range,"<",options)},{"./outside":59}],56:[function(require,module,exports){const SemVer=require("../classes/semver"),Range=require("../classes/range");module.exports=(versions,range,options)=>{let max=null,maxSV=null,rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((v=>{rangeObj.test(v)&&(max&&-1!==maxSV.compare(v)||(max=v,maxSV=new SemVer(max,options)))})),max}},{"../classes/range":21,"../classes/semver":22}],57:[function(require,module,exports){const SemVer=require("../classes/semver"),Range=require("../classes/range");module.exports=(versions,range,options)=>{let min=null,minSV=null,rangeObj=null;try{rangeObj=new Range(range,options)}catch(er){return null}return versions.forEach((v=>{rangeObj.test(v)&&(min&&1!==minSV.compare(v)||(min=v,minSV=new SemVer(min,options)))})),min}},{"../classes/range":21,"../classes/semver":22}],58:[function(require,module,exports){const SemVer=require("../classes/semver"),Range=require("../classes/range"),gt=require("../functions/gt");module.exports=(range,loose)=>{range=new Range(range,loose);let minver=new SemVer("0.0.0");if(range.test(minver))return minver;if(minver=new SemVer("0.0.0-0"),range.test(minver))return minver;minver=null;for(let i=0;i<range.set.length;++i){const comparators=range.set[i];let setMin=null;comparators.forEach((comparator=>{const compver=new SemVer(comparator.semver.version);switch(comparator.operator){case">":0===compver.prerelease.length?compver.patch++:compver.prerelease.push(0),compver.raw=compver.format();case"":case">=":setMin&&!gt(compver,setMin)||(setMin=compver);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${comparator.operator}`)}})),!setMin||minver&&!gt(minver,setMin)||(minver=setMin)}return minver&&range.test(minver)?minver:null}},{"../classes/range":21,"../classes/semver":22,"../functions/gt":31}],59:[function(require,module,exports){const SemVer=require("../classes/semver"),Comparator=require("../classes/comparator"),{ANY:ANY}=Comparator,Range=require("../classes/range"),satisfies=require("../functions/satisfies"),gt=require("../functions/gt"),lt=require("../functions/lt"),lte=require("../functions/lte"),gte=require("../functions/gte");module.exports=(version,range,hilo,options)=>{let gtfn,ltefn,ltfn,comp,ecomp;switch(version=new SemVer(version,options),range=new Range(range,options),hilo){case">":gtfn=gt,ltefn=lte,ltfn=lt,comp=">",ecomp=">=";break;case"<":gtfn=lt,ltefn=gte,ltfn=gt,comp="<",ecomp="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(satisfies(version,range,options))return!1;for(let i=0;i<range.set.length;++i){const comparators=range.set[i];let high=null,low=null;if(comparators.forEach((comparator=>{comparator.semver===ANY&&(comparator=new Comparator(">=0.0.0")),high=high||comparator,low=low||comparator,gtfn(comparator.semver,high.semver,options)?high=comparator:ltfn(comparator.semver,low.semver,options)&&(low=comparator)})),high.operator===comp||high.operator===ecomp)return!1;if((!low.operator||low.operator===comp)&&ltefn(version,low.semver))return!1;if(low.operator===ecomp&&ltfn(version,low.semver))return!1}return!0}},{"../classes/comparator":20,"../classes/range":21,"../classes/semver":22,"../functions/gt":31,"../functions/gte":32,"../functions/lt":34,"../functions/lte":35,"../functions/satisfies":44}],60:[function(require,module,exports){const satisfies=require("../functions/satisfies.js"),compare=require("../functions/compare.js");module.exports=(versions,range,options)=>{const set=[];let first=null,prev=null;const v=versions.sort(((a,b)=>compare(a,b,options)));for(const version of v)satisfies(version,range,options)?(prev=version,first||(first=version)):(prev&&set.push([first,prev]),prev=null,first=null);first&&set.push([first,null]);const ranges=[];for(const[min,max]of set)min===max?ranges.push(min):max||min!==v[0]?max?min===v[0]?ranges.push(`<=${max}`):ranges.push(`${min} - ${max}`):ranges.push(`>=${min}`):ranges.push("*");const simplified=ranges.join(" || "),original="string"==typeof range.raw?range.raw:String(range);return simplified.length<original.length?simplified:range}},{"../functions/compare.js":28,"../functions/satisfies.js":44}],61:[function(require,module,exports){const Range=require("../classes/range.js"),Comparator=require("../classes/comparator.js"),{ANY:ANY}=Comparator,satisfies=require("../functions/satisfies.js"),compare=require("../functions/compare.js"),minimumVersionWithPreRelease=[new Comparator(">=0.0.0-0")],minimumVersion=[new Comparator(">=0.0.0")],simpleSubset=(sub,dom,options)=>{if(sub===dom)return!0;if(1===sub.length&&sub[0].semver===ANY){if(1===dom.length&&dom[0].semver===ANY)return!0;sub=options.includePrerelease?minimumVersionWithPreRelease:minimumVersion}if(1===dom.length&&dom[0].semver===ANY){if(options.includePrerelease)return!0;dom=minimumVersion}const eqSet=new Set;let gt,lt,gtltComp,higher,lower,hasDomLT,hasDomGT;for(const c of sub)">"===c.operator||">="===c.operator?gt=higherGT(gt,c,options):"<"===c.operator||"<="===c.operator?lt=lowerLT(lt,c,options):eqSet.add(c.semver);if(eqSet.size>1)return null;if(gt&&lt){if(gtltComp=compare(gt.semver,lt.semver,options),gtltComp>0)return null;if(0===gtltComp&&(">="!==gt.operator||"<="!==lt.operator))return null}for(const eq of eqSet){if(gt&&!satisfies(eq,String(gt),options))return null;if(lt&&!satisfies(eq,String(lt),options))return null;for(const c of dom)if(!satisfies(eq,String(c),options))return!1;return!0}let needDomLTPre=!(!lt||options.includePrerelease||!lt.semver.prerelease.length)&&lt.semver,needDomGTPre=!(!gt||options.includePrerelease||!gt.semver.prerelease.length)&&gt.semver;needDomLTPre&&1===needDomLTPre.prerelease.length&&"<"===lt.operator&&0===needDomLTPre.prerelease[0]&&(needDomLTPre=!1);for(const c of dom){if(hasDomGT=hasDomGT||">"===c.operator||">="===c.operator,hasDomLT=hasDomLT||"<"===c.operator||"<="===c.operator,gt)if(needDomGTPre&&c.semver.prerelease&&c.semver.prerelease.length&&c.semver.major===needDomGTPre.major&&c.semver.minor===needDomGTPre.minor&&c.semver.patch===needDomGTPre.patch&&(needDomGTPre=!1),">"===c.operator||">="===c.operator){if(higher=higherGT(gt,c,options),higher===c&&higher!==gt)return!1}else if(">="===gt.operator&&!satisfies(gt.semver,String(c),options))return!1;if(lt)if(needDomLTPre&&c.semver.prerelease&&c.semver.prerelease.length&&c.semver.major===needDomLTPre.major&&c.semver.minor===needDomLTPre.minor&&c.semver.patch===needDomLTPre.patch&&(needDomLTPre=!1),"<"===c.operator||"<="===c.operator){if(lower=lowerLT(lt,c,options),lower===c&&lower!==lt)return!1}else if("<="===lt.operator&&!satisfies(lt.semver,String(c),options))return!1;if(!c.operator&&(lt||gt)&&0!==gtltComp)return!1}return!(gt&&hasDomLT&&!lt&&0!==gtltComp||lt&&hasDomGT&&!gt&&0!==gtltComp||needDomGTPre||needDomLTPre)},higherGT=(a,b,options)=>{if(!a)return b;const comp=compare(a.semver,b.semver,options);return comp>0?a:comp<0||">"===b.operator&&">="===a.operator?b:a},lowerLT=(a,b,options)=>{if(!a)return b;const comp=compare(a.semver,b.semver,options);return comp<0?a:comp>0||"<"===b.operator&&"<="===a.operator?b:a};module.exports=(sub,dom,options={})=>{if(sub===dom)return!0;sub=new Range(sub,options),dom=new Range(dom,options);let sawNonNull=!1;OUTER:for(const simpleSub of sub.set){for(const simpleDom of dom.set){const isSub=simpleSubset(simpleSub,simpleDom,options);if(sawNonNull=sawNonNull||null!==isSub,isSub)continue OUTER}if(sawNonNull)return!1}return!0}},{"../classes/comparator.js":20,"../classes/range.js":21,"../functions/compare.js":28,"../functions/satisfies.js":44}],62:[function(require,module,exports){const Range=require("../classes/range");module.exports=(range,options)=>new Range(range,options).set.map((comp=>comp.map((c=>c.value)).join(" ").trim().split(" ")))},{"../classes/range":21}],63:[function(require,module,exports){const Range=require("../classes/range");module.exports=(range,options)=>{try{return new Range(range,options).range||"*"}catch(er){return null}}},{"../classes/range":21}],64:[function(require,module,exports){"use strict";module.exports=function(Yallist){Yallist.prototype[Symbol.iterator]=function*(){for(let walker=this.head;walker;walker=walker.next)yield walker.value}}},{}],65:[function(require,module,exports){"use strict";function Yallist(list){var self=this;if(self instanceof Yallist||(self=new Yallist),self.tail=null,self.head=null,self.length=0,list&&"function"==typeof list.forEach)list.forEach((function(item){self.push(item)}));else if(arguments.length>0)for(var i=0,l=arguments.length;i<l;i++)self.push(arguments[i]);return self}function insert(self,node,value){var inserted=node===self.head?new Node(value,null,node,self):new Node(value,node,node.next,self);return null===inserted.next&&(self.tail=inserted),null===inserted.prev&&(self.head=inserted),self.length++,inserted}function push(self,item){self.tail=new Node(item,self.tail,null,self),self.head||(self.head=self.tail),self.length++}function unshift(self,item){self.head=new Node(item,null,self.head,self),self.tail||(self.tail=self.head),self.length++}function Node(value,prev,next,list){if(!(this instanceof Node))return new Node(value,prev,next,list);this.list=list,this.value=value,prev?(prev.next=this,this.prev=prev):this.prev=null,next?(next.prev=this,this.next=next):this.next=null}module.exports=Yallist,Yallist.Node=Node,Yallist.create=Yallist,Yallist.prototype.removeNode=function(node){if(node.list!==this)throw new Error("removing node which does not belong to this list");var next=node.next,prev=node.prev;return next&&(next.prev=prev),prev&&(prev.next=next),node===this.head&&(this.head=next),node===this.tail&&(this.tail=prev),node.list.length--,node.next=null,node.prev=null,node.list=null,next},Yallist.prototype.unshiftNode=function(node){if(node!==this.head){node.list&&node.list.removeNode(node);var head=this.head;node.list=this,node.next=head,head&&(head.prev=node),this.head=node,this.tail||(this.tail=node),this.length++}},Yallist.prototype.pushNode=function(node){if(node!==this.tail){node.list&&node.list.removeNode(node);var tail=this.tail;node.list=this,node.prev=tail,tail&&(tail.next=node),this.tail=node,this.head||(this.head=node),this.length++}},Yallist.prototype.push=function(){for(var i=0,l=arguments.length;i<l;i++)push(this,arguments[i]);return this.length},Yallist.prototype.unshift=function(){for(var i=0,l=arguments.length;i<l;i++)unshift(this,arguments[i]);return this.length},Yallist.prototype.pop=function(){if(this.tail){var res=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,res}},Yallist.prototype.shift=function(){if(this.head){var res=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,res}},Yallist.prototype.forEach=function(fn,thisp){thisp=thisp||this;for(var walker=this.head,i=0;null!==walker;i++)fn.call(thisp,walker.value,i,this),walker=walker.next},Yallist.prototype.forEachReverse=function(fn,thisp){thisp=thisp||this;for(var walker=this.tail,i=this.length-1;null!==walker;i--)fn.call(thisp,walker.value,i,this),walker=walker.prev},Yallist.prototype.get=function(n){for(var i=0,walker=this.head;null!==walker&&i<n;i++)walker=walker.next;if(i===n&&null!==walker)return walker.value},Yallist.prototype.getReverse=function(n){for(var i=0,walker=this.tail;null!==walker&&i<n;i++)walker=walker.prev;if(i===n&&null!==walker)return walker.value},Yallist.prototype.map=function(fn,thisp){thisp=thisp||this;for(var res=new Yallist,walker=this.head;null!==walker;)res.push(fn.call(thisp,walker.value,this)),walker=walker.next;return res},Yallist.prototype.mapReverse=function(fn,thisp){thisp=thisp||this;for(var res=new Yallist,walker=this.tail;null!==walker;)res.push(fn.call(thisp,walker.value,this)),walker=walker.prev;return res},Yallist.prototype.reduce=function(fn,initial){var acc,walker=this.head;if(arguments.length>1)acc=initial;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");walker=this.head.next,acc=this.head.value}for(var i=0;null!==walker;i++)acc=fn(acc,walker.value,i),walker=walker.next;return acc},Yallist.prototype.reduceReverse=function(fn,initial){var acc,walker=this.tail;if(arguments.length>1)acc=initial;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");walker=this.tail.prev,acc=this.tail.value}for(var i=this.length-1;null!==walker;i--)acc=fn(acc,walker.value,i),walker=walker.prev;return acc},Yallist.prototype.toArray=function(){for(var arr=new Array(this.length),i=0,walker=this.head;null!==walker;i++)arr[i]=walker.value,walker=walker.next;return arr},Yallist.prototype.toArrayReverse=function(){for(var arr=new Array(this.length),i=0,walker=this.tail;null!==walker;i++)arr[i]=walker.value,walker=walker.prev;return arr},Yallist.prototype.slice=function(from,to){(to=to||this.length)<0&&(to+=this.length),(from=from||0)<0&&(from+=this.length);var ret=new Yallist;if(to<from||to<0)return ret;from<0&&(from=0),to>this.length&&(to=this.length);for(var i=0,walker=this.head;null!==walker&&i<from;i++)walker=walker.next;for(;null!==walker&&i<to;i++,walker=walker.next)ret.push(walker.value);return ret},Yallist.prototype.sliceReverse=function(from,to){(to=to||this.length)<0&&(to+=this.length),(from=from||0)<0&&(from+=this.length);var ret=new Yallist;if(to<from||to<0)return ret;from<0&&(from=0),to>this.length&&(to=this.length);for(var i=this.length,walker=this.tail;null!==walker&&i>to;i--)walker=walker.prev;for(;null!==walker&&i>from;i--,walker=walker.prev)ret.push(walker.value);return ret},Yallist.prototype.splice=function(start,deleteCount,...nodes){start>this.length&&(start=this.length-1),start<0&&(start=this.length+start);for(var i=0,walker=this.head;null!==walker&&i<start;i++)walker=walker.next;var ret=[];for(i=0;walker&&i<deleteCount;i++)ret.push(walker.value),walker=this.removeNode(walker);for(null===walker&&(walker=this.tail),walker!==this.head&&walker!==this.tail&&(walker=walker.prev),i=0;i<nodes.length;i++)walker=insert(this,walker,nodes[i]);return ret},Yallist.prototype.reverse=function(){for(var head=this.head,tail=this.tail,walker=head;null!==walker;walker=walker.prev){var p=walker.prev;walker.prev=walker.next,walker.next=p}return this.head=tail,this.tail=head,this};try{require("./iterator.js")(Yallist)}catch(er){}},{"./iterator.js":64}],66:[function(require,module,exports){"use strict";module.exports={createHash:function(alg){return{update:function(data){return{digest:function(enc){return""}}}}},createHmac:function(alg,key){return{update:function(data){return{digest:function(enc){return""}}}}}}},{}],67:[function(require,module,exports){(function(global){"use strict";if(!global.moment)throw new Error("Moment is not installed.");module.exports=global.moment}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);